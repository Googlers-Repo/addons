"use strict";/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/strings","vs/base/common/platform","vs/base/common/path","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/mime","vs/base/common/stream","vs/base/common/errors","vs/base/common/map","vs/base/common/arrays","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/eolCounter","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ie=function(te){for(var e=[],B=0,M=te.length;B<M;B++)e[B]=ne[te[B]];return e};define(ne[12],ie([0,1,4]),function(te,e,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const M={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},F={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function S(y){const N=(0,B.extname)(y),L=M[N.toLowerCase()];return L!==void 0?L:A(y)}e.getMediaOrTextMime=S;function A(y){const N=(0,B.extname)(y);return F[N.toLowerCase()]}e.getMediaMime=A;function V(y){for(const N in F)if(F[N]===y)return N}e.getExtensionForMimeType=V;const k=/^(.+)\/(.+?)(;.+)?$/;function w(y,N){const L=k.exec(y);return L?`${L[1].toLowerCase()}/${L[2].toLowerCase()}${L[3]??""}`:N?void 0:y}e.normalizeMimeType=w}),define(ne[13],ie([0,1,14,6]),function(te,e,B,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function F(u){const d=u;return d?typeof d.read=="function":!1}e.isReadable=F;function S(u){const d=u;return d?[d.on,d.pause,d.resume,d.destroy].every(m=>typeof m=="function"):!1}e.isReadableStream=S;function A(u){const d=u;return d?S(d.stream)&&Array.isArray(d.buffer)&&typeof d.ended=="boolean":!1}e.isReadableBufferedStream=A;function V(u,d){return new k(u,d)}e.newWriteableStream=V;class k{constructor(d,m){this.reducer=d,this.options=m,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(d){if(!this.state.destroyed){if(this.state.flowing)this.emitData(d);else if(this.buffer.data.push(d),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(m=>this.pendingWritePromises.push(m))}}error(d){this.state.destroyed||(this.state.flowing?this.emitError(d):this.buffer.error.push(d))}end(d){this.state.destroyed||(typeof d<"u"&&this.write(d),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(d){this.listeners.data.slice(0).forEach(m=>m(d))}emitError(d){this.listeners.error.length===0?(0,B.onUnexpectedError)(d):this.listeners.error.slice(0).forEach(m=>m(d))}emitEnd(){this.listeners.end.slice(0).forEach(d=>d())}on(d,m){if(!this.state.destroyed)switch(d){case"data":this.listeners.data.push(m),this.resume();break;case"end":this.listeners.end.push(m),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(m),this.state.flowing&&this.flowErrors();break}}removeListener(d,m){if(this.state.destroyed)return;let I;switch(d){case"data":I=this.listeners.data;break;case"end":I=this.listeners.end;break;case"error":I=this.listeners.error;break}if(I){const b=I.indexOf(m);b>=0&&I.splice(b,1)}}flowData(){if(this.buffer.data.length>0){const d=this.reducer(this.buffer.data);this.emitData(d),this.buffer.data.length=0;const m=[...this.pendingWritePromises];this.pendingWritePromises.length=0,m.forEach(I=>I())}}flowErrors(){if(this.listeners.error.length>0){for(const d of this.buffer.error)this.emitError(d);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function w(u,d){const m=[];let I;for(;(I=u.read())!==null;)m.push(I);return d(m)}e.consumeReadable=w;function y(u,d,m){const I=[];let b;for(;(b=u.read())!==null&&I.length<m;)I.push(b);return b===null&&I.length>0?d(I):{read:()=>{if(I.length>0)return I.shift();if(typeof b<"u"){const a=b;return b=void 0,a}return u.read()}}}e.peekReadable=y;function N(u,d){return new Promise((m,I)=>{const b=[];L(u,{onData:a=>{d&&b.push(a)},onError:a=>{d?I(a):m(void 0)},onEnd:()=>{m(d?d(b):void 0)}})})}e.consumeStream=N;function L(u,d){let m=!1;return u.on("error",I=>{m||d.onError(I)}),u.on("end",()=>{m||d.onEnd()}),u.on("data",I=>{m||d.onData(I)}),(0,M.toDisposable)(()=>m=!0)}e.listenStream=L;function T(u,d){return new Promise((m,I)=>{const b=new M.DisposableStore,a=[],o=h=>{if(a.push(h),a.length>d)return b.dispose(),u.pause(),m({stream:u,buffer:a,ended:!1})},f=h=>I(h),r=()=>m({stream:u,buffer:a,ended:!0});b.add((0,M.toDisposable)(()=>u.removeListener("error",f))),u.on("error",f),b.add((0,M.toDisposable)(()=>u.removeListener("end",r))),u.on("end",r),b.add((0,M.toDisposable)(()=>u.removeListener("data",o))),u.on("data",o)})}e.peekStream=T;function _(u,d){const m=V(d);return m.end(u),m}e.toStream=_;function c(){const u=V(()=>{throw new Error("not supported")});return u.end(),u}e.emptyStream=c;function l(u){let d=!1;return{read:()=>d?null:(d=!0,u)}}e.toReadable=l;function t(u,d,m){const I=V(m);return L(u,{onData:b=>I.write(d.data(b)),onError:b=>I.error(d.error?d.error(b):b),onEnd:()=>I.end()}),I}e.transform=t;function s(u,d,m){let I=!1;return{read:()=>{const b=d.read();return I?b:(I=!0,b!==null?m([u,b]):u)}}}e.prefixedReadable=s;function i(u,d,m){let I=!1;const b=V(m);return L(d,{onData:a=>I?b.write(a):(I=!0,b.write(m([u,a]))),onError:a=>b.error(a),onEnd:()=>{I||(I=!0,b.write(u)),b.end()}}),b}e.prefixedStream=i}),define(ne[5],ie([0,1,13]),function(te,e,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const M=typeof Buffer<"u";let F,S;class A{static alloc(h){return M?new A(Buffer.allocUnsafe(h)):new A(new Uint8Array(h))}static wrap(h){return M&&!Buffer.isBuffer(h)&&(h=Buffer.from(h.buffer,h.byteOffset,h.byteLength)),new A(h)}static fromString(h,E){return!(E?.dontUseNodeBuffer||!1)&&M?new A(Buffer.from(h)):(F||(F=new TextEncoder),new A(F.encode(h)))}static fromByteArray(h){const E=A.alloc(h.length);for(let P=0,q=h.length;P<q;P++)E.buffer[P]=h[P];return E}static concat(h,E){if(typeof E>"u"){E=0;for(let j=0,O=h.length;j<O;j++)E+=h[j].byteLength}const P=A.alloc(E);let q=0;for(let j=0,O=h.length;j<O;j++){const n=h[j];P.set(n,q),q+=n.byteLength}return P}constructor(h){this.buffer=h,this.byteLength=this.buffer.byteLength}clone(){const h=A.alloc(this.byteLength);return h.set(this),h}toString(){return M?this.buffer.toString():(S||(S=new TextDecoder),S.decode(this.buffer))}slice(h,E){return new A(this.buffer.subarray(h,E))}set(h,E){if(h instanceof A)this.buffer.set(h.buffer,E);else if(h instanceof Uint8Array)this.buffer.set(h,E);else if(h instanceof ArrayBuffer)this.buffer.set(new Uint8Array(h),E);else if(ArrayBuffer.isView(h))this.buffer.set(new Uint8Array(h.buffer,h.byteOffset,h.byteLength),E);else throw new Error("Unknown argument 'array'")}readUInt32BE(h){return w(this.buffer,h)}writeUInt32BE(h,E){y(this.buffer,h,E)}readUInt32LE(h){return N(this.buffer,h)}writeUInt32LE(h,E){L(this.buffer,h,E)}readUInt8(h){return T(this.buffer,h)}writeUInt8(h,E){_(this.buffer,h,E)}}e.VSBuffer=A;function V(r,h){return r[h+0]<<0>>>0|r[h+1]<<8>>>0}e.readUInt16LE=V;function k(r,h,E){r[E+0]=h&255,h=h>>>8,r[E+1]=h&255}e.writeUInt16LE=k;function w(r,h){return r[h]*2**24+r[h+1]*2**16+r[h+2]*2**8+r[h+3]}e.readUInt32BE=w;function y(r,h,E){r[E+3]=h,h=h>>>8,r[E+2]=h,h=h>>>8,r[E+1]=h,h=h>>>8,r[E]=h}e.writeUInt32BE=y;function N(r,h){return r[h+0]<<0>>>0|r[h+1]<<8>>>0|r[h+2]<<16>>>0|r[h+3]<<24>>>0}e.readUInt32LE=N;function L(r,h,E){r[E+0]=h&255,h=h>>>8,r[E+1]=h&255,h=h>>>8,r[E+2]=h&255,h=h>>>8,r[E+3]=h&255}e.writeUInt32LE=L;function T(r,h){return r[h]}e.readUInt8=T;function _(r,h,E){r[E]=h}e.writeUInt8=_;function c(r){return B.consumeReadable(r,h=>A.concat(h))}e.readableToBuffer=c;function l(r){return B.toReadable(r)}e.bufferToReadable=l;function t(r){return B.consumeStream(r,h=>A.concat(h))}e.streamToBuffer=t;async function s(r){return r.ended?A.concat(r.buffer):A.concat([...r.buffer,await t(r.stream)])}e.bufferedStreamToBuffer=s;function i(r){return B.toStream(r,h=>A.concat(h))}e.bufferToStream=i;function u(r){return B.transform(r,{data:h=>typeof h=="string"?A.fromString(h):A.wrap(h)},h=>A.concat(h))}e.streamToBufferReadableStream=u;function d(r){return B.newWriteableStream(h=>A.concat(h),r)}e.newWriteableBufferStream=d;function m(r,h){return B.prefixedReadable(r,h,E=>A.concat(E))}e.prefixedBufferReadable=m;function I(r,h){return B.prefixedStream(r,h,E=>A.concat(E))}e.prefixedBufferStream=I;function b(r){let h=0,E=0,P=0;const q=new Uint8Array(Math.floor(r.length/4*3)),j=n=>{switch(E){case 3:q[P++]=h|n,E=0;break;case 2:q[P++]=h|n>>>2,h=n<<6,E=3;break;case 1:q[P++]=h|n>>>4,h=n<<4,E=2;break;default:h=n<<2,E=1}};for(let n=0;n<r.length;n++){const p=r.charCodeAt(n);if(p>=65&&p<=90)j(p-65);else if(p>=97&&p<=122)j(p-97+26);else if(p>=48&&p<=57)j(p-48+52);else if(p===43||p===45)j(62);else if(p===47||p===95)j(63);else{if(p===61)break;throw new SyntaxError(`Unexpected base64 character ${r[n]}`)}}const O=P;for(;E>0;)j(0);return A.wrap(q).slice(0,O)}e.decodeBase64=b;const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function f({buffer:r},h=!0,E=!1){const P=E?o:a;let q="";const j=r.byteLength%3;let O=0;for(;O<r.byteLength-j;O+=3){const n=r[O+0],p=r[O+1],C=r[O+2];q+=P[n>>>2],q+=P[(n<<4|p>>>4)&63],q+=P[(p<<2|C>>>6)&63],q+=P[C&63]}if(j===1){const n=r[O+0];q+=P[n>>>2],q+=P[n<<4&63],h&&(q+="==")}else if(j===2){const n=r[O+0],p=r[O+1];q+=P[n>>>2],q+=P[(n<<4|p>>>4)&63],q+=P[p<<2&63],h&&(q+="=")}return q}e.encodeBase64=f}),define(ne[15],ie([0,1,16,2]),function(te,e,B,M){"use strict";var F,S,A;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=e.setToString=e.mapToString=e.getOrSet=void 0;function V(b,a,o){let f=b.get(a);return f===void 0&&(f=o,b.set(a,f)),f}e.getOrSet=V;function k(b){const a=[];return b.forEach((o,f)=>{a.push(`${f} => ${o}`)}),`Map(${b.size}) {${a.join(", ")}}`}e.mapToString=k;function w(b){const a=[];return b.forEach(o=>{a.push(o)}),`Set(${b.size}) {${a.join(", ")}}`}e.setToString=w;class y{constructor(){this._value="",this._pos=0}reset(a){return this._value=a,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(a){const o=a.charCodeAt(0),f=this._value.charCodeAt(this._pos);return o-f}value(){return this._value[this._pos]}}e.StringIterator=y;class N{constructor(a=!0){this._caseSensitive=a}reset(a){return this._value=a,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let a=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(a)this._from++;else break;else a=!1;return this}cmp(a){return this._caseSensitive?(0,M.compareSubstring)(a,this._value,0,a.length,this._from,this._to):(0,M.compareSubstringIgnoreCase)(a,this._value,0,a.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=N;class L{constructor(a=!0,o=!0){this._splitOnBackslash=a,this._caseSensitive=o}reset(a){this._from=0,this._to=0,this._value=a,this._valueLen=a.length;for(let o=a.length-1;o>=0;o--,this._valueLen--){const f=this._value.charCodeAt(o);if(!(f===47||this._splitOnBackslash&&f===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let a=!0;for(;this._to<this._valueLen;this._to++){const o=this._value.charCodeAt(this._to);if(o===47||this._splitOnBackslash&&o===92)if(a)this._from++;else break;else a=!1}return this}cmp(a){return this._caseSensitive?(0,M.compareSubstring)(a,this._value,0,a.length,this._from,this._to):(0,M.compareSubstringIgnoreCase)(a,this._value,0,a.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=L;var T;(function(b){b[b.Scheme=1]="Scheme",b[b.Authority=2]="Authority",b[b.Path=3]="Path",b[b.Query=4]="Query",b[b.Fragment=5]="Fragment"})(T||(T={}));class _{constructor(a,o){this._ignorePathCasing=a,this._ignoreQueryAndFragment=o,this._states=[],this._stateIdx=0}reset(a){return this._value=a,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new L(!1,!this._ignorePathCasing(a)),this._pathIterator.reset(a.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(a)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(a){if(this._states[this._stateIdx]===1)return(0,M.compareIgnoreCase)(a,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,M.compareIgnoreCase)(a,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(a);if(this._states[this._stateIdx]===4)return(0,M.compare)(a,this._value.query);if(this._states[this._stateIdx]===5)return(0,M.compare)(a,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=_;class c{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const a=this.right;return this.right=a.left,a.left=this,this.updateHeight(),a.updateHeight(),a}rotateRight(){const a=this.left;return this.left=a.right,a.right=this,this.updateHeight(),a.updateHeight(),a}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var l;(function(b){b[b.Left=-1]="Left",b[b.Mid=0]="Mid",b[b.Right=1]="Right"})(l||(l={}));class t{static forUris(a=()=>!1,o=()=>!1){return new t(new _(a,o))}static forPaths(a=!1){return new t(new L(void 0,!a))}static forStrings(){return new t(new y)}static forConfigKeys(){return new t(new N)}constructor(a){this._iter=a}clear(){this._root=void 0}fill(a,o){if(o){const f=o.slice(0);(0,B.shuffle)(f);for(const r of f)this.set(r,a)}else{const f=a.slice(0);(0,B.shuffle)(f);for(const r of f)this.set(r[0],r[1])}}set(a,o){const f=this._iter.reset(a);let r;this._root||(this._root=new c,this._root.segment=f.value());const h=[];for(r=this._root;;){const P=f.cmp(r.segment);if(P>0)r.left||(r.left=new c,r.left.segment=f.value()),h.push([-1,r]),r=r.left;else if(P<0)r.right||(r.right=new c,r.right.segment=f.value()),h.push([1,r]),r=r.right;else if(f.hasNext())f.next(),r.mid||(r.mid=new c,r.mid.segment=f.value()),h.push([0,r]),r=r.mid;else break}const E=r.value;r.value=o,r.key=a;for(let P=h.length-1;P>=0;P--){const q=h[P][1];q.updateHeight();const j=q.balanceFactor();if(j<-1||j>1){const O=h[P][0],n=h[P+1][0];if(O===1&&n===1)h[P][1]=q.rotateLeft();else if(O===-1&&n===-1)h[P][1]=q.rotateRight();else if(O===1&&n===-1)q.right=h[P+1][1]=h[P+1][1].rotateRight(),h[P][1]=q.rotateLeft();else if(O===-1&&n===1)q.left=h[P+1][1]=h[P+1][1].rotateLeft(),h[P][1]=q.rotateRight();else throw new Error;if(P>0)switch(h[P-1][0]){case-1:h[P-1][1].left=h[P][1];break;case 1:h[P-1][1].right=h[P][1];break;case 0:h[P-1][1].mid=h[P][1];break}else this._root=h[0][1]}}return E}get(a){return this._getNode(a)?.value}_getNode(a){const o=this._iter.reset(a);let f=this._root;for(;f;){const r=o.cmp(f.segment);if(r>0)f=f.left;else if(r<0)f=f.right;else if(o.hasNext())o.next(),f=f.mid;else break}return f}has(a){const o=this._getNode(a);return!(o?.value===void 0&&o?.mid===void 0)}delete(a){return this._delete(a,!1)}deleteSuperstr(a){return this._delete(a,!0)}_delete(a,o){const f=this._iter.reset(a),r=[];let h=this._root;for(;h;){const E=f.cmp(h.segment);if(E>0)r.push([-1,h]),h=h.left;else if(E<0)r.push([1,h]),h=h.right;else if(f.hasNext())f.next(),r.push([0,h]),h=h.mid;else break}if(!!h){if(o?(h.left=void 0,h.mid=void 0,h.right=void 0,h.height=1):(h.key=void 0,h.value=void 0),!h.mid&&!h.value)if(h.left&&h.right){const E=this._min(h.right);if(E.key){const{key:P,value:q,segment:j}=E;this._delete(E.key,!1),h.key=P,h.value=q,h.segment=j}}else{const E=h.left??h.right;if(r.length>0){const[P,q]=r[r.length-1];switch(P){case-1:q.left=E;break;case 0:q.mid=E;break;case 1:q.right=E;break}}else this._root=E}for(let E=r.length-1;E>=0;E--){const P=r[E][1];P.updateHeight();const q=P.balanceFactor();if(q>1?(P.right.balanceFactor()>=0||(P.right=P.right.rotateRight()),r[E][1]=P.rotateLeft()):q<-1&&(P.left.balanceFactor()<=0||(P.left=P.left.rotateLeft()),r[E][1]=P.rotateRight()),E>0)switch(r[E-1][0]){case-1:r[E-1][1].left=r[E][1];break;case 1:r[E-1][1].right=r[E][1];break;case 0:r[E-1][1].mid=r[E][1];break}else this._root=r[0][1]}}}_min(a){for(;a.left;)a=a.left;return a}findSubstr(a){const o=this._iter.reset(a);let f=this._root,r;for(;f;){const h=o.cmp(f.segment);if(h>0)f=f.left;else if(h<0)f=f.right;else if(o.hasNext())o.next(),r=f.value||r,f=f.mid;else break}return f&&f.value||r}findSuperstr(a){const o=this._iter.reset(a);let f=this._root;for(;f;){const r=o.cmp(f.segment);if(r>0)f=f.left;else if(r<0)f=f.right;else if(o.hasNext())o.next(),f=f.mid;else return f.mid?this._entries(f.mid):void 0}}forEach(a){for(const[o,f]of this)a(f,o)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(a){const o=[];return this._dfsEntries(a,o),o[Symbol.iterator]()}_dfsEntries(a,o){!a||(a.left&&this._dfsEntries(a.left,o),a.value&&o.push([a.key,a.value]),a.mid&&this._dfsEntries(a.mid,o),a.right&&this._dfsEntries(a.right,o))}_isBalanced(){const a=o=>{if(!o)return!0;const f=o.balanceFactor();return f<-1||f>1?!1:a(o.left)&&a(o.right)};return a(this._root)}}e.TernarySearchTree=t;class s{constructor(a,o){this.uri=a,this.value=o}}class i{constructor(a,o){this[F]="ResourceMap",a instanceof i?(this.map=new Map(a.map),this.toKey=o??i.defaultToKey):(this.map=new Map,this.toKey=a??i.defaultToKey)}set(a,o){return this.map.set(this.toKey(a),new s(a,o)),this}get(a){return this.map.get(this.toKey(a))?.value}has(a){return this.map.has(this.toKey(a))}get size(){return this.map.size}clear(){this.map.clear()}delete(a){return this.map.delete(this.toKey(a))}forEach(a,o){typeof o<"u"&&(a=a.bind(o));for(const[f,r]of this.map)a(r.value,r.uri,this)}*values(){for(const a of this.map.values())yield a.value}*keys(){for(const a of this.map.values())yield a.uri}*entries(){for(const a of this.map.values())yield[a.uri,a.value]}*[(F=Symbol.toStringTag,Symbol.iterator)](){for(const[,a]of this.map)yield[a.uri,a.value]}}e.ResourceMap=i,i.defaultToKey=b=>b.toString();class u{constructor(a,o){this[S]="ResourceSet",!a||typeof a=="function"?this._map=new i(a):(this._map=new i(o),a.forEach(this.add,this))}get size(){return this._map.size}add(a){return this._map.set(a,a),this}clear(){this._map.clear()}delete(a){return this._map.delete(a)}forEach(a,o){this._map.forEach((f,r)=>a.call(o,r,r,this))}has(a){return this._map.has(a)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(S=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=u;var d;(function(b){b[b.None=0]="None",b[b.AsOld=1]="AsOld",b[b.AsNew=2]="AsNew"})(d=e.Touch||(e.Touch={}));class m{constructor(){this[A]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(a){return this._map.has(a)}get(a,o=0){const f=this._map.get(a);if(!!f)return o!==0&&this.touch(f,o),f.value}set(a,o,f=0){let r=this._map.get(a);if(r)r.value=o,f!==0&&this.touch(r,f);else{switch(r={key:a,value:o,next:void 0,previous:void 0},f){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(a,r),this._size++}return this}delete(a){return!!this.remove(a)}remove(a){const o=this._map.get(a);if(!!o)return this._map.delete(a),this.removeItem(o),this._size--,o.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const a=this._head;return this._map.delete(a.key),this.removeItem(a),this._size--,a.value}forEach(a,o){const f=this._state;let r=this._head;for(;r;){if(o?a.bind(o)(r.value,r.key,this):a(r.value,r.key,this),this._state!==f)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const a=this,o=this._state;let f=this._head;const r={[Symbol.iterator](){return r},next(){if(a._state!==o)throw new Error("LinkedMap got modified during iteration.");if(f){const h={value:f.key,done:!1};return f=f.next,h}else return{value:void 0,done:!0}}};return r}values(){const a=this,o=this._state;let f=this._head;const r={[Symbol.iterator](){return r},next(){if(a._state!==o)throw new Error("LinkedMap got modified during iteration.");if(f){const h={value:f.value,done:!1};return f=f.next,h}else return{value:void 0,done:!0}}};return r}entries(){const a=this,o=this._state;let f=this._head;const r={[Symbol.iterator](){return r},next(){if(a._state!==o)throw new Error("LinkedMap got modified during iteration.");if(f){const h={value:[f.key,f.value],done:!1};return f=f.next,h}else return{value:void 0,done:!0}}};return r}[(A=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(a){if(a>=this.size)return;if(a===0){this.clear();return}let o=this._head,f=this.size;for(;o&&f>a;)this._map.delete(o.key),o=o.next,f--;this._head=o,this._size=f,o&&(o.previous=void 0),this._state++}addItemFirst(a){if(!this._head&&!this._tail)this._tail=a;else if(this._head)a.next=this._head,this._head.previous=a;else throw new Error("Invalid list");this._head=a,this._state++}addItemLast(a){if(!this._head&&!this._tail)this._head=a;else if(this._tail)a.previous=this._tail,this._tail.next=a;else throw new Error("Invalid list");this._tail=a,this._state++}removeItem(a){if(a===this._head&&a===this._tail)this._head=void 0,this._tail=void 0;else if(a===this._head){if(!a.next)throw new Error("Invalid list");a.next.previous=void 0,this._head=a.next}else if(a===this._tail){if(!a.previous)throw new Error("Invalid list");a.previous.next=void 0,this._tail=a.previous}else{const o=a.next,f=a.previous;if(!o||!f)throw new Error("Invalid list");o.previous=f,f.next=o}a.next=void 0,a.previous=void 0,this._state++}touch(a,o){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(o!==1&&o!==2)){if(o===1){if(a===this._head)return;const f=a.next,r=a.previous;a===this._tail?(r.next=void 0,this._tail=r):(f.previous=r,r.next=f),a.previous=void 0,a.next=this._head,this._head.previous=a,this._head=a,this._state++}else if(o===2){if(a===this._tail)return;const f=a.next,r=a.previous;a===this._head?(f.previous=void 0,this._head=f):(f.previous=r,r.next=f),a.next=void 0,a.previous=this._tail,this._tail.next=a,this._tail=a,this._state++}}}toJSON(){const a=[];return this.forEach((o,f)=>{a.push([f,o])}),a}fromJSON(a){this.clear();for(const[o,f]of a)this.set(o,f)}}e.LinkedMap=m;class I extends m{constructor(a,o=1){super(),this._limit=a,this._ratio=Math.min(Math.max(0,o),1)}get limit(){return this._limit}set limit(a){this._limit=a,this.checkTrim()}get ratio(){return this._ratio}set ratio(a){this._ratio=Math.min(Math.max(0,a),1),this.checkTrim()}get(a,o=2){return super.get(a,o)}peek(a){return super.get(a,0)}set(a,o){return super.set(a,o,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=I}),define(ne[7],ie([0,1,4,3,2,31]),function(te,e,B,M,F,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function A(o){return o===47||o===92}e.isPathSeparator=A;function V(o){return o.replace(/[\\/]/g,B.posix.sep)}e.toSlashes=V;function k(o){return o.indexOf("/")===-1&&(o=V(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}e.toPosixPath=k;function w(o,f=B.posix.sep){if(!o)return"";const r=o.length,h=o.charCodeAt(0);if(A(h)){if(A(o.charCodeAt(1))&&!A(o.charCodeAt(2))){let P=3;const q=P;for(;P<r&&!A(o.charCodeAt(P));P++);if(q!==P&&!A(o.charCodeAt(P+1))){for(P+=1;P<r;P++)if(A(o.charCodeAt(P)))return o.slice(0,P+1).replace(/[\\/]/g,f)}}return f}else if(t(h)&&o.charCodeAt(1)===58)return A(o.charCodeAt(2))?o.slice(0,2)+f:o.slice(0,2);let E=o.indexOf("://");if(E!==-1){for(E+=3;E<r;E++)if(A(o.charCodeAt(E)))return o.slice(0,E+1)}return""}e.getRoot=w;function y(o){if(!M.isWindows||!o||o.length<5)return!1;let f=o.charCodeAt(0);if(f!==92||(f=o.charCodeAt(1),f!==92))return!1;let r=2;const h=r;for(;r<o.length&&(f=o.charCodeAt(r),f!==92);r++);return!(h===r||(f=o.charCodeAt(r+1),isNaN(f)||f===92))}e.isUNC=y;const N=/[\\/:\*\?"<>\|]/g,L=/[\\/]/g,T=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function _(o,f=M.isWindows){const r=f?N:L;return!(!o||o.length===0||/^\s+$/.test(o)||(r.lastIndex=0,r.test(o))||f&&T.test(o)||o==="."||o===".."||f&&o[o.length-1]==="."||f&&o.length!==o.trim().length||o.length>255)}e.isValidBasename=_;function c(o,f,r){const h=o===f;return!r||h?h:!o||!f?!1:(0,F.equalsIgnoreCase)(o,f)}e.isEqual=c;function l(o,f,r,h=B.sep){if(o===f)return!0;if(!o||!f||f.length>o.length)return!1;if(r){if(!(0,F.startsWithIgnoreCase)(o,f))return!1;if(f.length===o.length)return!0;let P=f.length;return f.charAt(f.length-1)===h&&P--,o.charAt(P)===h}return f.charAt(f.length-1)!==h&&(f+=h),o.indexOf(f)===0}e.isEqualOrParent=l;function t(o){return o>=65&&o<=90||o>=97&&o<=122}e.isWindowsDriveLetter=t;function s(o,f){return M.isWindows&&o.endsWith(":")&&(o+=B.sep),(0,B.isAbsolute)(o)||(o=(0,B.join)(f,o)),o=(0,B.normalize)(o),M.isWindows?(o=(0,F.rtrim)(o,B.sep),o.endsWith(":")&&(o+=B.sep)):(o=(0,F.rtrim)(o,B.sep),o||(o=B.sep)),o}e.sanitizeFilePath=s;function i(o){const f=(0,B.normalize)(o);return M.isWindows?o.length>3?!1:u(f)&&(o.length===2||f.charCodeAt(2)===92):f===B.posix.sep}e.isRootOrDriveLetter=i;function u(o,f=M.isWindows){return f?t(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}e.hasDriveLetter=u;function d(o){return u(o)?o[0]:void 0}e.getDriveLetter=d;function m(o,f,r){return f.length>o.length?-1:o===f?0:(r&&(o=o.toLowerCase(),f=f.toLowerCase()),o.indexOf(f))}e.indexOfPath=m;function I(o){const f=o.split(":");let r,h,E;for(const P of f){const q=Number(P);(0,S.isNumber)(q)?h===void 0?h=q:E===void 0&&(E=q):r=r?[r,P].join(":"):P}if(!r)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:r,line:h!==void 0?h:void 0,column:E!==void 0?E:h!==void 0?1:void 0}}e.parseLineAndColumnAware=I;const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function a(o,f,r=8){let h="";for(let P=0;P<r;P++)h+=b.charAt(Math.floor(Math.random()*b.length));let E;return f?E=`${f}-${h}`:E=h,o?(0,B.join)(o,E):E}e.randomPath=a}),define(ne[8],ie([0,1,3,9]),function(te,e,B,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var F;(function(k){k.inMemory="inmemory",k.vscode="vscode",k.internal="private",k.walkThrough="walkThrough",k.walkThroughSnippet="walkThroughSnippet",k.http="http",k.https="https",k.file="file",k.mailto="mailto",k.untitled="untitled",k.data="data",k.command="command",k.vscodeRemote="vscode-remote",k.vscodeRemoteResource="vscode-remote-resource",k.vscodeUserData="vscode-userdata",k.vscodeCustomEditor="vscode-custom-editor",k.vscodeNotebook="vscode-notebook",k.vscodeNotebookCell="vscode-notebook-cell",k.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",k.vscodeNotebookCellOutput="vscode-notebook-cell-output",k.vscodeInteractive="vscode-interactive",k.vscodeInteractiveInput="vscode-interactive-input",k.vscodeSettings="vscode-settings",k.vscodeWorkspaceTrust="vscode-workspace-trust",k.vscodeTerminal="vscode-terminal",k.webviewPanel="webview-panel",k.vscodeWebview="vscode-webview",k.extension="extension",k.vscodeFileResource="vscode-file",k.tmp="tmp",k.vsls="vsls",k.vscodeSourceControl="vscode-scm"})(F=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class S{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${F.vscodeRemoteResource}`}setPreferredWebSchema(w){this._preferredWebSchema=w}setDelegate(w){this._delegate=w}setServerRootPath(w){this._remoteResourcesPath=`${w}/${F.vscodeRemoteResource}`}set(w,y,N){this._hosts[w]=y,this._ports[w]=N}setConnectionToken(w,y){this._connectionTokens[w]=y}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(w){if(this._delegate)return this._delegate(w);const y=w.authority;let N=this._hosts[y];N&&N.indexOf(":")!==-1&&N.indexOf("[")===-1&&(N=`[${N}]`);const L=this._ports[y],T=this._connectionTokens[y];let _=`path=${encodeURIComponent(w.path)}`;return typeof T=="string"&&(_+=`&${e.connectionTokenQueryName}=${encodeURIComponent(T)}`),M.URI.from({scheme:B.isWeb?this._preferredWebSchema:F.vscodeRemoteResource,authority:`${N}:${L}`,path:B.isWeb?(window.location.pathname+"/"+this._remoteResourcesPath).replace(/\/\/+/g,"/"):this._remoteResourcesPath,query:_})}}e.RemoteAuthorities=new S;class A{asBrowserUri(w,y){const N=this.toUri(w,y);return N.scheme===F.vscodeRemote?e.RemoteAuthorities.rewrite(N):N.scheme===F.file&&(B.isNative||B.isWebWorker&&B.globals.origin===`${F.vscodeFileResource}://${A.FALLBACK_AUTHORITY}`)?N.with({scheme:F.vscodeFileResource,authority:N.authority||A.FALLBACK_AUTHORITY,query:null,fragment:null}):N}asFileUri(w,y){const N=this.toUri(w,y);return N.scheme===F.vscodeFileResource?N.with({scheme:F.file,authority:N.authority!==A.FALLBACK_AUTHORITY?N.authority:null,query:null,fragment:null}):N}toUri(w,y){return M.URI.isUri(w)?w:M.URI.parse(y.toUrl(w))}}A.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new A;var V;(function(k){const w=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);k.CoopAndCoep=Object.freeze(w.get("3"));const y="vscode-coi";function N(T){let _;typeof T=="string"?_=new URL(T).searchParams:T instanceof URL?_=T.searchParams:M.URI.isUri(T)&&(_=new URL(T.toString(!0)).searchParams);const c=_?.get(y);if(!!c)return w.get(c)}k.getHeadersFromQuery=N;function L(T,_,c){if(!globalThis.crossOriginIsolated)return;const l=_&&c?"3":c?"2":"1";T instanceof URLSearchParams?T.set(y,l):T[y]=l}k.addSearchParam=L})(V=e.COI||(e.COI={}))}),define(ne[17],ie([0,1,7,8,4,3,2,9]),function(te,e,B,M,F,S,A,V){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function k(T){return(0,V.uriToFsPath)(T,!0)}e.originalFSPath=k;class w{constructor(_){this._ignorePathCasing=_}compare(_,c,l=!1){return _===c?0:(0,A.compare)(this.getComparisonKey(_,l),this.getComparisonKey(c,l))}isEqual(_,c,l=!1){return _===c?!0:!_||!c?!1:this.getComparisonKey(_,l)===this.getComparisonKey(c,l)}getComparisonKey(_,c=!1){return _.with({path:this._ignorePathCasing(_)?_.path.toLowerCase():void 0,fragment:c?null:void 0}).toString()}ignorePathCasing(_){return this._ignorePathCasing(_)}isEqualOrParent(_,c,l=!1){if(_.scheme===c.scheme){if(_.scheme===M.Schemas.file)return B.isEqualOrParent(k(_),k(c),this._ignorePathCasing(_))&&_.query===c.query&&(l||_.fragment===c.fragment);if((0,e.isEqualAuthority)(_.authority,c.authority))return B.isEqualOrParent(_.path,c.path,this._ignorePathCasing(_),"/")&&_.query===c.query&&(l||_.fragment===c.fragment)}return!1}joinPath(_,...c){return V.URI.joinPath(_,...c)}basenameOrAuthority(_){return(0,e.basename)(_)||_.authority}basename(_){return F.posix.basename(_.path)}extname(_){return F.posix.extname(_.path)}dirname(_){if(_.path.length===0)return _;let c;return _.scheme===M.Schemas.file?c=V.URI.file(F.dirname(k(_))).path:(c=F.posix.dirname(_.path),_.authority&&c.length&&c.charCodeAt(0)!==47&&(console.error(`dirname("${_.toString})) resulted in a relative path`),c="/")),_.with({path:c})}normalizePath(_){if(!_.path.length)return _;let c;return _.scheme===M.Schemas.file?c=V.URI.file(F.normalize(k(_))).path:c=F.posix.normalize(_.path),_.with({path:c})}relativePath(_,c){if(_.scheme!==c.scheme||!(0,e.isEqualAuthority)(_.authority,c.authority))return;if(_.scheme===M.Schemas.file){const s=F.relative(k(_),k(c));return S.isWindows?B.toSlashes(s):s}let l=_.path||"/";const t=c.path||"/";if(this._ignorePathCasing(_)){let s=0;for(const i=Math.min(l.length,t.length);s<i&&!(l.charCodeAt(s)!==t.charCodeAt(s)&&l.charAt(s).toLowerCase()!==t.charAt(s).toLowerCase());s++);l=t.substr(0,s)+l.substr(s)}return F.posix.relative(l,t)}resolvePath(_,c){if(_.scheme===M.Schemas.file){const l=V.URI.file(F.resolve(k(_),c));return _.with({authority:l.authority,path:l.path})}return c=B.toPosixPath(c),_.with({path:F.posix.resolve(_.path,c)})}isAbsolutePath(_){return!!_.path&&_.path[0]==="/"}isEqualAuthority(_,c){return _===c||_!==void 0&&c!==void 0&&(0,A.equalsIgnoreCase)(_,c)}hasTrailingPathSeparator(_,c=F.sep){if(_.scheme===M.Schemas.file){const l=k(_);return l.length>B.getRoot(l).length&&l[l.length-1]===c}else{const l=_.path;return l.length>1&&l.charCodeAt(l.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(_.fsPath)}}removeTrailingPathSeparator(_,c=F.sep){return(0,e.hasTrailingPathSeparator)(_,c)?_.with({path:_.path.substr(0,_.path.length-1)}):_}addTrailingPathSeparator(_,c=F.sep){let l=!1;if(_.scheme===M.Schemas.file){const t=k(_);l=t!==void 0&&t.length===B.getRoot(t).length&&t[t.length-1]===c}else{c="/";const t=_.path;l=t.length===1&&t.charCodeAt(t.length-1)===47}return!l&&!(0,e.hasTrailingPathSeparator)(_,c)?_.with({path:_.path+"/"}):_}}e.ExtUri=w,e.extUri=new w(()=>!1),e.extUriBiasedIgnorePathCase=new w(T=>T.scheme===M.Schemas.file?!S.isLinux:!0),e.extUriIgnorePathCase=new w(T=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function y(T,_){const c=[];for(let l=0;l<T.length;l++){const t=_(T[l]);T.some((s,i)=>i===l?!1:(0,e.isEqualOrParent)(t,_(s)))||c.push(T[l])}return c}e.distinctParents=y;var N;(function(T){T.META_DATA_LABEL="label",T.META_DATA_DESCRIPTION="description",T.META_DATA_SIZE="size",T.META_DATA_MIME="mime";function _(c){const l=new Map;c.path.substring(c.path.indexOf(";")+1,c.path.lastIndexOf(";")).split(";").forEach(i=>{const[u,d]=i.split(":");u&&d&&l.set(u,d)});const s=c.path.substring(0,c.path.indexOf(";"));return s&&l.set(T.META_DATA_MIME,s),l}T.parseMetaData=_})(N=e.DataUri||(e.DataUri={}));function L(T,_,c){if(_){let l=T.path;return l&&l[0]!==F.posix.sep&&(l=F.posix.sep+l),T.with({scheme:c,authority:_,path:l})}return T.with({scheme:c})}e.toLocalResource=L}),define(ne[18],ie([0,1,32,14,19,6,17,3]),function(te,e,B,M,F,S,A,V){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function k(U){return!!U&&typeof U.then=="function"}e.isThenable=k;function w(U){const g=new B.CancellationTokenSource,v=U(g.token),R=new Promise((D,x)=>{const Z=g.token.onCancellationRequested(()=>{Z.dispose(),g.dispose(),x(new M.CancellationError)});Promise.resolve(v).then(ee=>{Z.dispose(),g.dispose(),D(ee)},ee=>{Z.dispose(),g.dispose(),x(ee)})});return new class{cancel(){g.cancel()}then(D,x){return R.then(D,x)}catch(D){return this.then(void 0,D)}finally(D){return R.finally(D)}}}e.createCancelablePromise=w;function y(U,g,v){return new Promise((R,D)=>{const x=g.onCancellationRequested(()=>{x.dispose(),R(v)});U.then(R,D).finally(()=>x.dispose())})}e.raceCancellation=y;function N(U,g){return new Promise((v,R)=>{const D=g.onCancellationRequested(()=>{D.dispose(),R(new M.CancellationError)});U.then(v,R).finally(()=>D.dispose())})}e.raceCancellationError=N;async function L(U){let g=-1;const v=U.map((D,x)=>D.then(Z=>(g=x,Z))),R=await Promise.race(v);return U.forEach((D,x)=>{x!==g&&D.cancel()}),R}e.raceCancellablePromises=L;function T(U,g,v){let R;const D=setTimeout(()=>{R?.(void 0),v?.()},g);return Promise.race([U.finally(()=>clearTimeout(D)),new Promise(x=>R=x)])}e.raceTimeout=T;function _(U){return new Promise((g,v)=>{const R=U();k(R)?R.then(g,v):g(R)})}e.asPromise=_;class c{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(g){if(this.activePromise){if(this.queuedPromiseFactory=g,!this.queuedPromise){const v=()=>{this.queuedPromise=null;const R=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,R};this.queuedPromise=new Promise(R=>{this.activePromise.then(v,v).then(R)})}return new Promise((v,R)=>{this.queuedPromise.then(v,R)})}return this.activePromise=g(),new Promise((v,R)=>{this.activePromise.then(D=>{this.activePromise=null,v(D)},D=>{this.activePromise=null,R(D)})})}}e.Throttler=c;class l{constructor(){this.current=Promise.resolve(null)}queue(g){return this.current=this.current.then(()=>g(),()=>g())}}e.Sequencer=l;class t{constructor(){this.promiseMap=new Map}queue(g,v){const D=(this.promiseMap.get(g)??Promise.resolve()).catch(()=>{}).then(v).finally(()=>{this.promiseMap.get(g)===D&&this.promiseMap.delete(g)});return this.promiseMap.set(g,D),D}}e.SequencerByKey=t;const s=(U,g)=>{let v=!0;const R=setTimeout(()=>{v=!1,g()},U);return{isTriggered:()=>v,dispose:()=>{clearTimeout(R),v=!1}}},i=U=>{let g=!0;return queueMicrotask(()=>{g&&(g=!1,U())}),{isTriggered:()=>g,dispose:()=>{g=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class u{constructor(g){this.defaultDelay=g,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(g,v=this.defaultDelay){this.task=g,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((D,x)=>{this.doResolve=D,this.doReject=x}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const D=this.task;return this.task=null,D()}}));const R=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=v===e.MicrotaskDelay?i(R):s(v,R),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new M.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=u;class d{constructor(g){this.delayer=new u(g),this.throttler=new c}trigger(g,v){return this.delayer.trigger(()=>this.throttler.queue(g),v)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=d;class m{constructor(){this._isOpen=!1,this._promise=new Promise((g,v)=>{this._completePromise=g})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=m;class I extends m{constructor(g){super(),this._timeout=setTimeout(()=>this.open(),g)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=I;function b(U,g){return g?new Promise((v,R)=>{const D=setTimeout(()=>{x.dispose(),v()},U),x=g.onCancellationRequested(()=>{clearTimeout(D),x.dispose(),R(new M.CancellationError)})}):w(v=>b(U,v))}e.timeout=b;function a(U,g=0){const v=setTimeout(U,g);return(0,S.toDisposable)(()=>clearTimeout(v))}e.disposableTimeout=a;function o(U){const g=[];let v=0;const R=U.length;function D(){return v<R?U[v++]():null}function x(Z){Z!=null&&g.push(Z);const ee=D();return ee?ee.then(x):Promise.resolve(g)}return Promise.resolve(null).then(x)}e.sequence=o;function f(U,g=R=>!!R,v=null){let R=0;const D=U.length,x=()=>{if(R>=D)return Promise.resolve(v);const Z=U[R++];return Promise.resolve(Z()).then(re=>g(re)?Promise.resolve(re):x())};return x()}e.first=f;function r(U,g=R=>!!R,v=null){if(U.length===0)return Promise.resolve(v);let R=U.length;const D=()=>{R=-1;for(const x of U)x.cancel?.()};return new Promise((x,Z)=>{for(const ee of U)ee.then(re=>{--R>=0&&g(re)?(D(),x(re)):R===0&&x(v)}).catch(re=>{--R>=0&&(D(),Z(re))})})}e.firstParallel=r;class h{constructor(g){this._size=0,this.maxDegreeOfParalellism=g,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new F.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(g){return this._size++,new Promise((v,R)=>{this.outstandingPromises.push({factory:g,c:v,e:R}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const g=this.outstandingPromises.shift();this.runningPromises++;const v=g.factory();v.then(g.c,g.e),v.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}e.Limiter=h;class E extends h{constructor(){super(1)}}e.Queue=E;class P{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const g=new z;return this.drainers.add(g),g.p}isDrained(){for(const[,g]of this.queues)if(g.size>0)return!1;return!0}queueFor(g,v=A.extUri){const R=v.getComparisonKey(g);let D=this.queues.get(R);return D||(D=new E,F.Event.once(D.onDrained)(()=>{D?.dispose(),this.queues.delete(R),this.onDidQueueDrain()}),this.queues.set(R,D)),D}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const g of this.drainers)g.complete();this.drainers.clear()}dispose(){for(const[,g]of this.queues)g.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=P;class q{constructor(g,v){this._token=-1,typeof g=="function"&&typeof v=="number"&&this.setIfNotSet(g,v)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(g,v){this.cancel(),this._token=setTimeout(()=>{this._token=-1,g()},v)}setIfNotSet(g,v){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,g()},v))}}e.TimeoutTimer=q;class j{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(g,v){this.cancel(),this._token=setInterval(()=>{g()},v)}}e.IntervalTimer=j;class O{constructor(g,v){this.timeoutToken=-1,this.runner=g,this.timeout=v,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(g=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,g)}get delay(){return this.timeout}set delay(g){this.timeout=g}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=O;class n{constructor(g,v){v%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${v}ms is not a multiple of 1000ms.`),this.runner=g,this.timeout=v,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(g=this.timeout){g%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${g}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(g/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner?.())}}e.ProcessTimeRunOnceScheduler=n;class p extends O{constructor(g,v){super(g,v),this.units=[]}work(g){this.units.push(g),this.isScheduled()||this.schedule()}doRun(){const g=this.units;this.units=[],this.runner?.(g)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=p;class C extends S.Disposable{constructor(g,v){super(),this.options=g,this.handler=v,this.pendingWork=[],this.throttler=this._register(new S.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(g){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+g.length>this.options.maxBufferedWork)return!1}else if(this.pending+g.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...g),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new O(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=C,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=U=>{(0,V.setTimeout0)(()=>{if(g)return;const v=Date.now()+15;U(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,v-Date.now())}}))});let g=!1;return{dispose(){g||(g=!0)}}}:e.runWhenIdle=(U,g)=>{const v=requestIdleCallback(U,typeof g=="number"?{timeout:g}:void 0);let R=!1;return{dispose(){R||(R=!0,cancelIdleCallback(v))}}}}();class W{constructor(g){this._didRun=!1,this._executor=()=>{try{this._value=g()}catch(v){this._error=v}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=W;async function G(U,g,v){let R;for(let D=0;D<v;D++)try{return await U()}catch(x){R=x,await b(g)}throw R}e.retry=G;class X{hasPending(g){return this._pending?typeof g=="number"?this._pending.taskId===g:!!this._pending:!1}get pending(){return this._pending?.promise}cancelPending(){this._pending?.cancel()}setPending(g,v,R){return this._pending={taskId:g,cancel:()=>R?.(),promise:v},v.then(()=>this.donePending(g),()=>this.donePending(g)),v}donePending(g){this._pending&&g===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const g=this._next;this._next=void 0,g.run().then(g.promiseResolve,g.promiseReject)}}setNext(g){if(this._next)this._next.run=g;else{let v,R;const D=new Promise((x,Z)=>{v=x,R=Z});this._next={run:g,promise:D,promiseResolve:v,promiseReject:R}}return this._next.promise}hasNext(){return!!this._next}async join(){return this._next?.promise??this._pending?.promise}}e.TaskSequentializer=X;class J{constructor(g,v=()=>Date.now()){this.interval=g,this.nowFn=v,this.lastIncrementTime=0,this.value=0}increment(){const g=this.nowFn();return g-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=g,this.value=0),this.value++,this.value}}e.IntervalCounter=J;class z{get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((g,v)=>{this.completeCallback=g,this.errorCallback=v})}complete(g){return new Promise(v=>{this.completeCallback(g),this.resolved=!0,v()})}error(g){return new Promise(v=>{this.errorCallback(g),this.rejected=!0,v()})}cancel(){new Promise(g=>{this.errorCallback(new M.CancellationError),this.rejected=!0,g()})}}e.DeferredPromise=z;var K;(function(U){async function g(R){let D;const x=await Promise.all(R.map(Z=>Z.then(ee=>ee,ee=>{D||(D=ee)})));if(typeof D<"u")throw D;return x}U.settled=g;function v(R){return new Promise(async(D,x)=>{try{await R(D,x)}catch(Z){x(Z)}})}U.withAsyncBody=v})(K=e.Promises||(e.Promises={}));var $;(function(U){U[U.Initial=0]="Initial",U[U.DoneOK=1]="DoneOK",U[U.DoneError=2]="DoneError"})($||($={}));class H{static fromArray(g){return new H(v=>{v.emitMany(g)})}static fromPromise(g){return new H(async v=>{v.emitMany(await g)})}static fromPromises(g){return new H(async v=>{await Promise.all(g.map(async R=>v.emitOne(await R)))})}static merge(g){return new H(async v=>{await Promise.all(g.map(async R=>{for await(const D of R)v.emitOne(D)}))})}constructor(g){this._state=0,this._results=[],this._error=null,this._onStateChanged=new F.Emitter,queueMicrotask(async()=>{const v={emitOne:R=>this.emitOne(R),emitMany:R=>this.emitMany(R),reject:R=>this.reject(R)};try{await Promise.resolve(g(v)),this.resolve()}catch(R){this.reject(R)}finally{v.emitOne=void 0,v.emitMany=void 0,v.reject=void 0}})}[Symbol.asyncIterator](){let g=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(g<this._results.length)return{done:!1,value:this._results[g++]};if(this._state===1)return{done:!0,value:void 0};await F.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(g,v){return new H(async R=>{for await(const D of g)R.emitOne(v(D))})}map(g){return H.map(this,g)}static filter(g,v){return new H(async R=>{for await(const D of g)v(D)&&R.emitOne(D)})}filter(g){return H.filter(this,g)}static coalesce(g){return H.filter(g,v=>!!v)}coalesce(){return H.coalesce(this)}static async toPromise(g){const v=[];for await(const R of g)v.push(R);return v}toPromise(){return H.toPromise(this)}emitOne(g){this._state===0&&(this._results.push(g),this._onStateChanged.fire())}emitMany(g){this._state===0&&(this._results=this._results.concat(g),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(g){this._state===0&&(this._state=2,this._error=g,this._onStateChanged.fire())}}e.AsyncIterableObject=H,H.EMPTY=H.fromArray([]);class Q extends H{constructor(g,v){super(v),this._source=g}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=Q;function Y(U){const g=new B.CancellationTokenSource,v=U(g.token);return new Q(g,async R=>{const D=g.token.onCancellationRequested(()=>{D.dispose(),g.dispose(),R.reject(new M.CancellationError)});try{for await(const x of v){if(g.token.isCancellationRequested)return;R.emitOne(x)}D.dispose(),g.dispose()}catch(x){D.dispose(),g.dispose(),R.reject(x)}})}e.createCancelableAsyncIterable=Y}),define(ne[20],ie([0,1,16,18,7,15,4,3,2]),function(te,e,B,M,F,S,A,V,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function w(){return Object.create(null)}e.getEmptyExpression=w,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const y="[/\\\\]",N="[^/\\\\]",L=/\//g;function T(z,K){switch(z){case 0:return"";case 1:return`${N}*?`;default:return`(?:${y}|${N}+${y}${K?`|${y}${N}+`:""})*?`}}function _(z,K){if(!z)return[];const $=[];let H=!1,Q=!1,Y="";for(const U of z){switch(U){case K:if(!H&&!Q){$.push(Y),Y="";continue}break;case"{":H=!0;break;case"}":H=!1;break;case"[":Q=!0;break;case"]":Q=!1;break}Y+=U}return Y&&$.push(Y),$}e.splitGlobAware=_;function c(z){if(!z)return"";let K="";const $=_(z,e.GLOB_SPLIT);if($.every(H=>H===e.GLOBSTAR))K=".*";else{let H=!1;$.forEach((Q,Y)=>{if(Q===e.GLOBSTAR){if(H)return;K+=T(2,Y===$.length-1)}else{let U=!1,g="",v=!1,R="";for(const D of Q){if(D!=="}"&&U){g+=D;continue}if(v&&(D!=="]"||!R)){let x;D==="-"?x=D:(D==="^"||D==="!")&&!R?x="^":D===e.GLOB_SPLIT?x="":x=(0,k.escapeRegExpCharacters)(D),R+=x;continue}switch(D){case"{":U=!0;continue;case"[":v=!0;continue;case"}":{K+=`(?:${_(g,",").map(ee=>c(ee)).join("|")})`,U=!1,g="";break}case"]":{K+="["+R+"]",v=!1,R="";break}case"?":K+=N;continue;case"*":K+=T(1);continue;default:K+=(0,k.escapeRegExpCharacters)(D)}}Y<$.length-1&&($[Y+1]!==e.GLOBSTAR||Y+2<$.length)&&(K+=y)}H=Q===e.GLOBSTAR})}return K}const l=/^\*\*\/\*\.[\w\.-]+$/,t=/^\*\*\/([\w\.-]+)\/?$/,s=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,i=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,u=/^\*\*((\/[\w\.-]+)+)\/?$/,d=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,m=new S.LRUCache(1e4),I=function(){return!1},b=function(){return null};function a(z,K){if(!z)return b;let $;typeof z!="string"?$=z.pattern:$=z,$=$.trim();const H=`${$}_${!!K.trimForExclusions}`;let Q=m.get(H);if(Q)return o(Q,z);let Y;return l.test($)?Q=r($.substr(4),$):(Y=t.exec(f($,K)))?Q=h(Y[1],$):(K.trimForExclusions?i:s).test($)?Q=E($,K):(Y=u.exec(f($,K)))?Q=P(Y[1].substr(1),$,!0):(Y=d.exec(f($,K)))?Q=P(Y[1],$,!1):Q=q($),m.set(H,Q),o(Q,z)}function o(z,K){if(typeof K=="string")return z;const $=function(H,Q){return(0,F.isEqualOrParent)(H,K.base,!V.isLinux)?z(H.substr(K.base.length+1),Q):null};return $.allBasenames=z.allBasenames,$.allPaths=z.allPaths,$.basenames=z.basenames,$.patterns=z.patterns,$}function f(z,K){return K.trimForExclusions&&z.endsWith("/**")?z.substr(0,z.length-2):z}function r(z,K){return function($,H){return typeof $=="string"&&$.endsWith(z)?K:null}}function h(z,K){const $=`/${z}`,H=`\\${z}`,Q=function(U,g){return typeof U!="string"?null:g?g===z?K:null:U===z||U.endsWith($)||U.endsWith(H)?K:null},Y=[z];return Q.basenames=Y,Q.patterns=[K],Q.allBasenames=Y,Q}function E(z,K){const $=X(z.slice(1,-1).split(",").map(g=>a(g,K)).filter(g=>g!==b),z),H=$.length;if(!H)return b;if(H===1)return $[0];const Q=function(g,v){for(let R=0,D=$.length;R<D;R++)if($[R](g,v))return z;return null},Y=$.find(g=>!!g.allBasenames);Y&&(Q.allBasenames=Y.allBasenames);const U=$.reduce((g,v)=>v.allPaths?g.concat(v.allPaths):g,[]);return U.length&&(Q.allPaths=U),Q}function P(z,K,$){const H=A.sep===A.posix.sep,Q=H?z:z.replace(L,A.sep),Y=A.sep+Q,U=A.posix.sep+z;let g;return $?g=function(v,R){return typeof v=="string"&&(v===Q||v.endsWith(Y)||!H&&(v===z||v.endsWith(U)))?K:null}:g=function(v,R){return typeof v=="string"&&(v===Q||!H&&v===z)?K:null},g.allPaths=[($?"*/":"./")+z],g}function q(z){try{const K=new RegExp(`^${c(z)}$`);return function($){return K.lastIndex=0,typeof $=="string"&&K.test($)?z:null}}catch{return b}}function j(z,K,$){return!z||typeof K!="string"?!1:O(z)(K,void 0,$)}e.match=j;function O(z,K={}){if(!z)return I;if(typeof z=="string"||n(z)){const $=a(z,K);if($===b)return I;const H=function(Q,Y){return!!$(Q,Y)};return $.allBasenames&&(H.allBasenames=$.allBasenames),$.allPaths&&(H.allPaths=$.allPaths),H}return W(z,K)}e.parse=O;function n(z){const K=z;return K?typeof K.base=="string"&&typeof K.pattern=="string":!1}e.isRelativePattern=n;function p(z){return z.allBasenames||[]}e.getBasenameTerms=p;function C(z){return z.allPaths||[]}e.getPathTerms=C;function W(z,K){const $=X(Object.getOwnPropertyNames(z).map(g=>G(g,z[g],K)).filter(g=>g!==b)),H=$.length;if(!H)return b;if(!$.some(g=>!!g.requiresSiblings)){if(H===1)return $[0];const g=function(D,x){let Z;for(let ee=0,re=$.length;ee<re;ee++){const se=$[ee](D,x);if(typeof se=="string")return se;(0,M.isThenable)(se)&&(Z||(Z=[]),Z.push(se))}return Z?(async()=>{for(const ee of Z){const re=await ee;if(typeof re=="string")return re}return null})():null},v=$.find(D=>!!D.allBasenames);v&&(g.allBasenames=v.allBasenames);const R=$.reduce((D,x)=>x.allPaths?D.concat(x.allPaths):D,[]);return R.length&&(g.allPaths=R),g}const Q=function(g,v,R){let D,x;for(let Z=0,ee=$.length;Z<ee;Z++){const re=$[Z];re.requiresSiblings&&R&&(v||(v=(0,A.basename)(g)),D||(D=v.substr(0,v.length-(0,A.extname)(g).length)));const se=re(g,v,D,R);if(typeof se=="string")return se;(0,M.isThenable)(se)&&(x||(x=[]),x.push(se))}return x?(async()=>{for(const Z of x){const ee=await Z;if(typeof ee=="string")return ee}return null})():null},Y=$.find(g=>!!g.allBasenames);Y&&(Q.allBasenames=Y.allBasenames);const U=$.reduce((g,v)=>v.allPaths?g.concat(v.allPaths):g,[]);return U.length&&(Q.allPaths=U),Q}function G(z,K,$){if(K===!1)return b;const H=a(z,$);if(H===b)return b;if(typeof K=="boolean")return H;if(K){const Q=K.when;if(typeof Q=="string"){const Y=(U,g,v,R)=>{if(!R||!H(U,g))return null;const D=Q.replace("$(basename)",v),x=R(D);return(0,M.isThenable)(x)?x.then(Z=>Z?z:null):x?z:null};return Y.requiresSiblings=!0,Y}}return H}function X(z,K){const $=z.filter(g=>!!g.basenames);if($.length<2)return z;const H=$.reduce((g,v)=>{const R=v.basenames;return R?g.concat(R):g},[]);let Q;if(K){Q=[];for(let g=0,v=H.length;g<v;g++)Q.push(K)}else Q=$.reduce((g,v)=>{const R=v.patterns;return R?g.concat(R):g},[]);const Y=function(g,v){if(typeof g!="string")return null;if(!v){let D;for(D=g.length;D>0;D--){const x=g.charCodeAt(D-1);if(x===47||x===92)break}v=g.substr(D)}const R=H.indexOf(v);return R!==-1?Q[R]:null};Y.basenames=H,Y.patterns=Q,Y.allBasenames=H;const U=z.filter(g=>!g.basenames);return U.push(Y),U}function J(z,K){return(0,B.equals)(z,K,($,H)=>typeof $=="string"&&typeof H=="string"?$===H:typeof $!="string"&&typeof H!="string"?$.base===H.base&&$.pattern===H.pattern:!1)}e.patternsEquals=J}),define(ne[21],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var B;(function(F){F[F.Unknown=0]="Unknown",F[F.Invalid=3]="Invalid",F[F.LF=1]="LF",F[F.CRLF=2]="CRLF"})(B=e.StringEOL||(e.StringEOL={}));function M(F){let S=0,A=0,V=0,k=0;for(let w=0,y=F.length;w<y;w++){const N=F.charCodeAt(w);N===13?(S===0&&(A=w),S++,w+1<y&&F.charCodeAt(w+1)===10?(k|=2,w++):k|=3,V=w+1):N===10&&(k|=1,S===0&&(A=w),S++,V=w+1)}return S===0&&(A=F.length),[S,A,F.length-V,k]}e.countEOL=M}),define(ne[22],ie([0,1,2,3,5]),function(te,e,B,M,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringBuilder=e.decodeUTF16LE=e.getPlatformTextDecoder=void 0;let S;function A(){return S||(S=new TextDecoder("UTF-16LE")),S}let V;function k(){return V||(V=new TextDecoder("UTF-16BE")),V}let w;function y(){return w||(w=M.isLittleEndian()?A():k()),w}e.getPlatformTextDecoder=y;function N(_,c,l){const t=new Uint16Array(_.buffer,c,l);return l>0&&(t[0]===65279||t[0]===65534)?L(_,c,l):A().decode(t)}e.decodeUTF16LE=N;function L(_,c,l){const t=[];let s=0;for(let i=0;i<l;i++){const u=F.readUInt16LE(_,c);c+=2,t[s++]=String.fromCharCode(u)}return t.join("")}class T{constructor(c){this._capacity=c|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const c=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return y().decode(c)}_flushBuffer(){const c=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[c]:this._completedStrings[this._completedStrings.length]=c}write1(c){const l=this._capacity-this._bufferLength;l<=1&&(l===0||B.isHighSurrogate(c))&&this._flushBuffer(),this._buffer[this._bufferLength++]=c}appendASCII(c){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=c}appendASCIIString(c){const l=c.length;if(this._bufferLength+l>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=c;return}for(let t=0;t<l;t++)this._buffer[this._bufferLength++]=c.charCodeAt(t)}}e.StringBuilder=T}),define(ne[23],ie([0,1,5,22]),function(te,e,B,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function F(k){return k.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class S{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(w,y,N,L){this.oldPosition=w,this.oldText=y,this.newPosition=N,this.newText=L}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${F(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${F(this.oldText)}")`:`(replace@${this.oldPosition} "${F(this.oldText)}" with "${F(this.newText)}")`}static _writeStringSize(w){return 4+2*w.length}static _writeString(w,y,N){const L=y.length;B.writeUInt32BE(w,L,N),N+=4;for(let T=0;T<L;T++)B.writeUInt16LE(w,y.charCodeAt(T),N),N+=2;return N}static _readString(w,y){const N=B.readUInt32BE(w,y);return y+=4,(0,M.decodeUTF16LE)(w,y,N)}writeSize(){return 4+4+S._writeStringSize(this.oldText)+S._writeStringSize(this.newText)}write(w,y){return B.writeUInt32BE(w,this.oldPosition,y),y+=4,B.writeUInt32BE(w,this.newPosition,y),y+=4,y=S._writeString(w,this.oldText,y),y=S._writeString(w,this.newText,y),y}static read(w,y,N){const L=B.readUInt32BE(w,y);y+=4;const T=B.readUInt32BE(w,y);y+=4;const _=S._readString(w,y);y+=S._writeStringSize(_);const c=S._readString(w,y);return y+=S._writeStringSize(c),N.push(new S(L,_,T,c)),y}}e.TextChange=S;function A(k,w){return k===null||k.length===0?w:new V(k,w).compress()}e.compressConsecutiveTextChanges=A;class V{constructor(w,y){this._prevEdits=w,this._currEdits=y,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let w=0,y=0,N=this._getPrev(w),L=this._getCurr(y);for(;w<this._prevLen||y<this._currLen;){if(N===null){this._acceptCurr(L),L=this._getCurr(++y);continue}if(L===null){this._acceptPrev(N),N=this._getPrev(++w);continue}if(L.oldEnd<=N.newPosition){this._acceptCurr(L),L=this._getCurr(++y);continue}if(N.newEnd<=L.oldPosition){this._acceptPrev(N),N=this._getPrev(++w);continue}if(L.oldPosition<N.newPosition){const[t,s]=V._splitCurr(L,N.newPosition-L.oldPosition);this._acceptCurr(t),L=s;continue}if(N.newPosition<L.oldPosition){const[t,s]=V._splitPrev(N,L.oldPosition-N.newPosition);this._acceptPrev(t),N=s;continue}let c,l;if(L.oldEnd===N.newEnd)c=N,l=L,N=this._getPrev(++w),L=this._getCurr(++y);else if(L.oldEnd<N.newEnd){const[t,s]=V._splitPrev(N,L.oldLength);c=t,l=L,N=s,L=this._getCurr(++y)}else{const[t,s]=V._splitCurr(L,N.newLength);c=N,l=t,N=this._getPrev(++w),L=s}this._result[this._resultLen++]=new S(c.oldPosition,c.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=c.newLength-c.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const T=V._merge(this._result);return V._removeNoOps(T)}_acceptCurr(w){this._result[this._resultLen++]=V._rebaseCurr(this._prevDeltaOffset,w),this._currDeltaOffset+=w.newLength-w.oldLength}_getCurr(w){return w<this._currLen?this._currEdits[w]:null}_acceptPrev(w){this._result[this._resultLen++]=V._rebasePrev(this._currDeltaOffset,w),this._prevDeltaOffset+=w.newLength-w.oldLength}_getPrev(w){return w<this._prevLen?this._prevEdits[w]:null}static _rebaseCurr(w,y){return new S(y.oldPosition-w,y.oldText,y.newPosition,y.newText)}static _rebasePrev(w,y){return new S(y.oldPosition,y.oldText,y.newPosition+w,y.newText)}static _splitPrev(w,y){const N=w.newText.substr(0,y),L=w.newText.substr(y);return[new S(w.oldPosition,w.oldText,w.newPosition,N),new S(w.oldEnd,"",w.newPosition+y,L)]}static _splitCurr(w,y){const N=w.oldText.substr(0,y),L=w.oldText.substr(y);return[new S(w.oldPosition,N,w.newPosition,w.newText),new S(w.oldPosition+y,L,w.newEnd,"")]}static _merge(w){if(w.length===0)return w;const y=[];let N=0,L=w[0];for(let T=1;T<w.length;T++){const _=w[T];L.oldEnd===_.oldPosition?L=new S(L.oldPosition,L.oldText+_.oldText,L.newPosition,L.newText+_.newText):(y[N++]=L,L=_)}return y[N++]=L,y}static _removeNoOps(w){if(w.length===0)return w;const y=[];let N=0;for(let L=0;L<w.length;L++){const T=w[L];T.oldText!==T.newText&&(y[N++]=T)}return y}}}),define(ne[24],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.resetSentinel=e.calculateLF=e.calculateSize=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class B{constructor(l,t){this.piece=l,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return F(this.right);let l=this;for(;l.parent!==e.SENTINEL&&l.parent.left!==l;)l=l.parent;return l.parent===e.SENTINEL?e.SENTINEL:l.parent}prev(){if(this.left!==e.SENTINEL)return S(this.left);let l=this;for(;l.parent!==e.SENTINEL&&l.parent.right!==l;)l=l.parent;return l.parent===e.SENTINEL?e.SENTINEL:l.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=B;var M;(function(c){c[c.Black=0]="Black",c[c.Red=1]="Red"})(M=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new B(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function F(c){for(;c.left!==e.SENTINEL;)c=c.left;return c}e.leftest=F;function S(c){for(;c.right!==e.SENTINEL;)c=c.right;return c}e.righttest=S;function A(c){return c===e.SENTINEL?0:c.size_left+c.piece.length+A(c.right)}e.calculateSize=A;function V(c){return c===e.SENTINEL?0:c.lf_left+c.piece.lineFeedCnt+V(c.right)}e.calculateLF=V;function k(){e.SENTINEL.parent=e.SENTINEL}e.resetSentinel=k;function w(c,l){const t=l.right;t.size_left+=l.size_left+(l.piece?l.piece.length:0),t.lf_left+=l.lf_left+(l.piece?l.piece.lineFeedCnt:0),l.right=t.left,t.left!==e.SENTINEL&&(t.left.parent=l),t.parent=l.parent,l.parent===e.SENTINEL?c.root=t:l.parent.left===l?l.parent.left=t:l.parent.right=t,t.left=l,l.parent=t}e.leftRotate=w;function y(c,l){const t=l.left;l.left=t.right,t.right!==e.SENTINEL&&(t.right.parent=l),t.parent=l.parent,l.size_left-=t.size_left+(t.piece?t.piece.length:0),l.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),l.parent===e.SENTINEL?c.root=t:l===l.parent.right?l.parent.right=t:l.parent.left=t,t.right=l,l.parent=t}e.rightRotate=y;function N(c,l){let t,s;if(l.left===e.SENTINEL?(s=l,t=s.right):l.right===e.SENTINEL?(s=l,t=s.left):(s=F(l.right),t=s.right),s===c.root){c.root=t,t.color=0,l.detach(),k(),c.root.parent=e.SENTINEL;return}const i=s.color===1;if(s===s.parent.left?s.parent.left=t:s.parent.right=t,s===l?(t.parent=s.parent,_(c,t)):(s.parent===l?t.parent=s:t.parent=s.parent,_(c,t),s.left=l.left,s.right=l.right,s.parent=l.parent,s.color=l.color,l===c.root?c.root=s:l===l.parent.left?l.parent.left=s:l.parent.right=s,s.left!==e.SENTINEL&&(s.left.parent=s),s.right!==e.SENTINEL&&(s.right.parent=s),s.size_left=l.size_left,s.lf_left=l.lf_left,_(c,s)),l.detach(),t.parent.left===t){const d=A(t),m=V(t);if(d!==t.parent.size_left||m!==t.parent.lf_left){const I=d-t.parent.size_left,b=m-t.parent.lf_left;t.parent.size_left=d,t.parent.lf_left=m,T(c,t.parent,I,b)}}if(_(c,t.parent),i){k();return}let u;for(;t!==c.root&&t.color===0;)t===t.parent.left?(u=t.parent.right,u.color===1&&(u.color=0,t.parent.color=1,w(c,t.parent),u=t.parent.right),u.left.color===0&&u.right.color===0?(u.color=1,t=t.parent):(u.right.color===0&&(u.left.color=0,u.color=1,y(c,u),u=t.parent.right),u.color=t.parent.color,t.parent.color=0,u.right.color=0,w(c,t.parent),t=c.root)):(u=t.parent.left,u.color===1&&(u.color=0,t.parent.color=1,y(c,t.parent),u=t.parent.left),u.left.color===0&&u.right.color===0?(u.color=1,t=t.parent):(u.left.color===0&&(u.right.color=0,u.color=1,w(c,u),u=t.parent.left),u.color=t.parent.color,t.parent.color=0,u.left.color=0,y(c,t.parent),t=c.root));t.color=0,k()}e.rbDelete=N;function L(c,l){for(_(c,l);l!==c.root&&l.parent.color===1;)if(l.parent===l.parent.parent.left){const t=l.parent.parent.right;t.color===1?(l.parent.color=0,t.color=0,l.parent.parent.color=1,l=l.parent.parent):(l===l.parent.right&&(l=l.parent,w(c,l)),l.parent.color=0,l.parent.parent.color=1,y(c,l.parent.parent))}else{const t=l.parent.parent.left;t.color===1?(l.parent.color=0,t.color=0,l.parent.parent.color=1,l=l.parent.parent):(l===l.parent.left&&(l=l.parent,y(c,l)),l.parent.color=0,l.parent.parent.color=1,w(c,l.parent.parent))}c.root.color=0}e.fixInsert=L;function T(c,l,t,s){for(;l!==c.root&&l!==e.SENTINEL;)l.parent.left===l&&(l.parent.size_left+=t,l.parent.lf_left+=s),l=l.parent}e.updateTreeMetadata=T;function _(c,l){let t=0,s=0;if(l!==c.root){for(;l!==c.root&&l===l.parent.right;)l=l.parent;if(l!==c.root)for(l=l.parent,t=A(l.left)-l.size_left,s=V(l.left)-l.lf_left,l.size_left+=t,l.lf_left+=s;l!==c.root&&(t!==0||s!==0);)l.parent.left===l&&(l.parent.size_left+=t,l.parent.lf_left+=s),l=l.parent}}e.recomputeTreeMetadata=_}),define(ne[10],ie([0,1,33,11,25,24,34]),function(te,e,B,M,F,S,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=e.LineStarts=e.createUintArray=e.AverageBufferSize=void 0,e.AverageBufferSize=65535;function V(l){let t;return l[l.length-1]<65536?t=new Uint16Array(l.length):t=new Uint32Array(l.length),t.set(l,0),t}e.createUintArray=V;class k{constructor(t,s,i,u,d){this.lineStarts=t,this.cr=s,this.lf=i,this.crlf=u,this.isBasicASCII=d}}e.LineStarts=k;function w(l,t=!0){const s=[0];let i=1;for(let u=0,d=l.length;u<d;u++){const m=l.charCodeAt(u);m===13?u+1<d&&l.charCodeAt(u+1)===10?(s[i++]=u+2,u++):s[i++]=u+1:m===10&&(s[i++]=u+1)}return t?V(s):s}e.createLineStartsFast=w;function y(l,t){l.length=0,l[0]=0;let s=1,i=0,u=0,d=0,m=!0;for(let b=0,a=t.length;b<a;b++){const o=t.charCodeAt(b);o===13?b+1<a&&t.charCodeAt(b+1)===10?(d++,l[s++]=b+2,b++):(i++,l[s++]=b+1):o===10?(u++,l[s++]=b+1):m&&o!==9&&(o<32||o>126)&&(m=!1)}const I=new k(V(l),i,u,d,m);return l.length=0,I}e.createLineStarts=y;class N{constructor(t,s,i,u,d){this.bufferIndex=t,this.start=s,this.end=i,this.lineFeedCnt=u,this.length=d}}e.Piece=N;class L{constructor(t,s){this.buffer=t,this.lineStarts=s}}e.StringBuffer=L;class T{constructor(t,s){this._pieces=[],this._tree=t,this._BOM=s,this._index=0,t.root!==S.SENTINEL&&t.iterate(t.root,i=>(i!==S.SENTINEL&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class _{constructor(t){this._limit=t,this._cache=[]}get(t){for(let s=this._cache.length-1;s>=0;s--){const i=this._cache[s];if(i.nodeStartOffset<=t&&i.nodeStartOffset+i.node.piece.length>=t)return i}return null}get2(t){for(let s=this._cache.length-1;s>=0;s--){const i=this._cache[s];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<t&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=t)return i}return null}set(t){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(t)}validate(t){let s=!1;const i=this._cache;for(let u=0;u<i.length;u++){const d=i[u];if(d.node.parent===null||d.nodeStartOffset>=t){i[u]=null,s=!0;continue}}if(s){const u=[];for(const d of i)d!==null&&u.push(d);this._cache=u}}}class c{constructor(t,s,i){this.create(t,s,i)}create(t,s,i){this._buffers=[new L("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=S.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=s,this._EOLLength=s.length,this._EOLNormalized=i;let u=null;for(let d=0,m=t.length;d<m;d++)if(t[d].buffer.length>0){t[d].lineStarts||(t[d].lineStarts=w(t[d].buffer));const I=new N(d+1,{line:0,column:0},{line:t[d].lineStarts.length-1,column:t[d].buffer.length-t[d].lineStarts[t[d].lineStarts.length-1]},t[d].lineStarts.length-1,t[d].buffer.length);this._buffers.push(t[d]),u=this.rbInsertRight(u,I)}this._searchCache=new _(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(t){const s=e.AverageBufferSize,i=s-Math.floor(s/3),u=i*2;let d="",m=0;const I=[];if(this.iterate(this.root,b=>{const a=this.getNodeContent(b),o=a.length;if(m<=i||m+o<u)return d+=a,m+=o,!0;const f=d.replace(/\r\n|\r|\n/g,t);return I.push(new L(f,w(f))),d=a,m=o,!0}),m>0){const b=d.replace(/\r\n|\r|\n/g,t);I.push(new L(b,w(b)))}this.create(I,t,!0)}getEOL(){return this._EOL}setEOL(t){this._EOL=t,this._EOLLength=this._EOL.length,this.normalizeEOL(t)}createSnapshot(t){return new T(this,t)}equal(t){if(this.getLength()!==t.getLength()||this.getLineCount()!==t.getLineCount())return!1;const s=0;return this.iterate(this.root,u=>{if(u===S.SENTINEL)return!0;const d=this.getNodeContent(u),m=d.length,I=t.nodeAt(s),b=t.nodeAt(s+m),a=t.getValueInRange2(I,b);return d===a})}getOffsetAt(t,s){let i=0,u=this.root;for(;u!==S.SENTINEL;)if(u.left!==S.SENTINEL&&u.lf_left+1>=t)u=u.left;else{if(u.lf_left+u.piece.lineFeedCnt+1>=t)return i+=u.size_left,i+=this.getAccumulatedValue(u,t-u.lf_left-2)+s-1;t-=u.lf_left+u.piece.lineFeedCnt,i+=u.size_left+u.piece.length,u=u.right}return i}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let s=this.root,i=0;const u=t;for(;s!==S.SENTINEL;)if(s.size_left!==0&&s.size_left>=t)s=s.left;else if(s.size_left+s.piece.length>=t){const d=this.getIndexOf(s,t-s.size_left);if(i+=s.lf_left+d.index,d.index===0){const m=this.getOffsetAt(i+1,1),I=u-m;return new B.Position(i+1,I+1)}return new B.Position(i+1,d.remainder+1)}else if(t-=s.size_left+s.piece.length,i+=s.lf_left+s.piece.lineFeedCnt,s.right===S.SENTINEL){const d=this.getOffsetAt(i+1,1),m=u-t-d;return new B.Position(i+1,m+1)}else s=s.right;return new B.Position(1,1)}getValueInRange(t,s){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const i=this.nodeAt2(t.startLineNumber,t.startColumn),u=this.nodeAt2(t.endLineNumber,t.endColumn),d=this.getValueInRange2(i,u);return s?s!==this._EOL||!this._EOLNormalized?d.replace(/\r\n|\r|\n/g,s):s===this.getEOL()&&this._EOLNormalized?d:d.replace(/\r\n|\r|\n/g,s):d}getValueInRange2(t,s){if(t.node===s.node){const I=t.node,b=this._buffers[I.piece.bufferIndex].buffer,a=this.offsetInBuffer(I.piece.bufferIndex,I.piece.start);return b.substring(a+t.remainder,a+s.remainder)}let i=t.node;const u=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let m=u.substring(d+t.remainder,d+i.piece.length);for(i=i.next();i!==S.SENTINEL;){const I=this._buffers[i.piece.bufferIndex].buffer,b=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===s.node){m+=I.substring(b,b+s.remainder);break}else m+=I.substr(b,i.piece.length);i=i.next()}return m}getLinesContent(){const t=[];let s=0,i="",u=!1;return this.iterate(this.root,d=>{if(d===S.SENTINEL)return!0;const m=d.piece;let I=m.length;if(I===0)return!0;const b=this._buffers[m.bufferIndex].buffer,a=this._buffers[m.bufferIndex].lineStarts,o=m.start.line,f=m.end.line;let r=a[o]+m.start.column;if(u&&(b.charCodeAt(r)===10&&(r++,I--),t[s++]=i,i="",u=!1,I===0))return!0;if(o===f)return!this._EOLNormalized&&b.charCodeAt(r+I-1)===13?(u=!0,i+=b.substr(r,I-1)):i+=b.substr(r,I),!0;i+=this._EOLNormalized?b.substring(r,Math.max(r,a[o+1]-this._EOLLength)):b.substring(r,a[o+1]).replace(/(\r\n|\r|\n)$/,""),t[s++]=i;for(let h=o+1;h<f;h++)i=this._EOLNormalized?b.substring(a[h],a[h+1]-this._EOLLength):b.substring(a[h],a[h+1]).replace(/(\r\n|\r|\n)$/,""),t[s++]=i;return!this._EOLNormalized&&b.charCodeAt(a[f]+m.end.column-1)===13?(u=!0,m.end.column===0?s--:i=b.substr(a[f],m.end.column-1)):i=b.substr(a[f],m.end.column),!0}),u&&(t[s++]=i,i=""),t[s++]=i,t}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(t){return this._lastVisitedLine.lineNumber===t?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=t,t===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(t):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(t,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(t){if(t.remainder===t.node.piece.length){const s=t.node.next();if(!s)return 0;const i=this._buffers[s.piece.bufferIndex],u=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);return i.buffer.charCodeAt(u)}else{const s=this._buffers[t.node.piece.bufferIndex],u=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return s.buffer.charCodeAt(u)}}getLineCharCode(t,s){const i=this.nodeAt2(t,s+1);return this._getCharCode(i)}getLineLength(t){if(t===this.getLineCount()){const s=this.getOffsetAt(t,1);return this.getLength()-s}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this._EOLLength}getCharCode(t){const s=this.nodeAt(t);return this._getCharCode(s)}findMatchesInNode(t,s,i,u,d,m,I,b,a,o,f){const r=this._buffers[t.piece.bufferIndex],h=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start),E=this.offsetInBuffer(t.piece.bufferIndex,d),P=this.offsetInBuffer(t.piece.bufferIndex,m);let q;const j={line:0,column:0};let O,n;s._wordSeparators?(O=r.buffer.substring(E,P),n=p=>p+E,s.reset(0)):(O=r.buffer,n=p=>p,s.reset(E));do if(q=s.next(O),q){if(n(q.index)>=P)return o;this.positionInBuffer(t,n(q.index)-h,j);const p=this.getLineFeedCnt(t.piece.bufferIndex,d,j),C=j.line===d.line?j.column-d.column+u:j.column+1,W=C+q[0].length;if(f[o++]=(0,A.createFindMatch)(new M.Range(i+p,C,i+p,W),q,b),n(q.index)+q[0].length>=P||o>=a)return o}while(q);return o}findMatchesLineByLine(t,s,i,u){const d=[];let m=0;const I=new A.Searcher(s.wordSeparators,s.regex);let b=this.nodeAt2(t.startLineNumber,t.startColumn);if(b===null)return[];const a=this.nodeAt2(t.endLineNumber,t.endColumn);if(a===null)return[];let o=this.positionInBuffer(b.node,b.remainder);const f=this.positionInBuffer(a.node,a.remainder);if(b.node===a.node)return this.findMatchesInNode(b.node,I,t.startLineNumber,t.startColumn,o,f,s,i,u,m,d),d;let r=t.startLineNumber,h=b.node;for(;h!==a.node;){const P=this.getLineFeedCnt(h.piece.bufferIndex,o,h.piece.end);if(P>=1){const j=this._buffers[h.piece.bufferIndex].lineStarts,O=this.offsetInBuffer(h.piece.bufferIndex,h.piece.start),n=j[o.line+P],p=r===t.startLineNumber?t.startColumn:1;if(m=this.findMatchesInNode(h,I,r,p,o,this.positionInBuffer(h,n-O),s,i,u,m,d),m>=u)return d;r+=P}const q=r===t.startLineNumber?t.startColumn-1:0;if(r===t.endLineNumber){const j=this.getLineContent(r).substring(q,t.endColumn-1);return m=this._findMatchesInLine(s,I,j,t.endLineNumber,q,m,d,i,u),d}if(m=this._findMatchesInLine(s,I,this.getLineContent(r).substr(q),r,q,m,d,i,u),m>=u)return d;r++,b=this.nodeAt2(r,1),h=b.node,o=this.positionInBuffer(b.node,b.remainder)}if(r===t.endLineNumber){const P=r===t.startLineNumber?t.startColumn-1:0,q=this.getLineContent(r).substring(P,t.endColumn-1);return m=this._findMatchesInLine(s,I,q,t.endLineNumber,P,m,d,i,u),d}const E=r===t.startLineNumber?t.startColumn:1;return m=this.findMatchesInNode(a.node,I,r,E,o,f,s,i,u,m,d),d}_findMatchesInLine(t,s,i,u,d,m,I,b,a){const o=t.wordSeparators;if(!b&&t.simpleSearch){const r=t.simpleSearch,h=r.length,E=i.length;let P=-h;for(;(P=i.indexOf(r,P+h))!==-1;)if((!o||(0,A.isValidMatch)(o,i,E,P,h))&&(I[m++]=new F.FindMatch(new M.Range(u,P+1+d,u,P+1+h+d),null),m>=a))return m;return m}let f;s.reset(0);do if(f=s.next(i),f&&(I[m++]=(0,A.createFindMatch)(new M.Range(u,f.index+1+d,u,f.index+1+f[0].length+d),f,b),m>=a))return m;while(f);return m}insert(t,s,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==S.SENTINEL){const{node:u,remainder:d,nodeStartOffset:m}=this.nodeAt(t),I=u.piece,b=I.bufferIndex,a=this.positionInBuffer(u,d);if(u.piece.bufferIndex===0&&I.end.line===this._lastChangeBufferPos.line&&I.end.column===this._lastChangeBufferPos.column&&m+I.length===t&&s.length<e.AverageBufferSize){this.appendToNode(u,s),this.computeBufferMetadata();return}if(m===t)this.insertContentToNodeLeft(s,u),this._searchCache.validate(t);else if(m+u.piece.length>t){const o=[];let f=new N(I.bufferIndex,a,I.end,this.getLineFeedCnt(I.bufferIndex,a,I.end),this.offsetInBuffer(b,I.end)-this.offsetInBuffer(b,a));if(this.shouldCheckCRLF()&&this.endWithCR(s)&&this.nodeCharCodeAt(u,d)===10){const P={line:f.start.line+1,column:0};f=new N(f.bufferIndex,P,f.end,this.getLineFeedCnt(f.bufferIndex,P,f.end),f.length-1),s+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(s))if(this.nodeCharCodeAt(u,d-1)===13){const P=this.positionInBuffer(u,d-1);this.deleteNodeTail(u,P),s="\r"+s,u.piece.length===0&&o.push(u)}else this.deleteNodeTail(u,a);else this.deleteNodeTail(u,a);const r=this.createNewPieces(s);f.length>0&&this.rbInsertRight(u,f);let h=u;for(let E=0;E<r.length;E++)h=this.rbInsertRight(h,r[E]);this.deleteNodes(o)}else this.insertContentToNodeRight(s,u)}else{const u=this.createNewPieces(s);let d=this.rbInsertLeft(null,u[0]);for(let m=1;m<u.length;m++)d=this.rbInsertRight(d,u[m])}this.computeBufferMetadata()}delete(t,s){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",s<=0||this.root===S.SENTINEL)return;const i=this.nodeAt(t),u=this.nodeAt(t+s),d=i.node,m=u.node;if(d===m){const r=this.positionInBuffer(d,i.remainder),h=this.positionInBuffer(d,u.remainder);if(i.nodeStartOffset===t){if(s===d.piece.length){const E=d.next();(0,S.rbDelete)(this,d),this.validateCRLFWithPrevNode(E),this.computeBufferMetadata();return}this.deleteNodeHead(d,h),this._searchCache.validate(t),this.validateCRLFWithPrevNode(d),this.computeBufferMetadata();return}if(i.nodeStartOffset+d.piece.length===t+s){this.deleteNodeTail(d,r),this.validateCRLFWithNextNode(d),this.computeBufferMetadata();return}this.shrinkNode(d,r,h),this.computeBufferMetadata();return}const I=[],b=this.positionInBuffer(d,i.remainder);this.deleteNodeTail(d,b),this._searchCache.validate(t),d.piece.length===0&&I.push(d);const a=this.positionInBuffer(m,u.remainder);this.deleteNodeHead(m,a),m.piece.length===0&&I.push(m);const o=d.next();for(let r=o;r!==S.SENTINEL&&r!==m;r=r.next())I.push(r);const f=d.piece.length===0?d.prev():d;this.deleteNodes(I),this.validateCRLFWithNextNode(f),this.computeBufferMetadata()}insertContentToNodeLeft(t,s){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.startWithLF(s)){const m=s.piece,I={line:m.start.line+1,column:0},b=new N(m.bufferIndex,I,m.end,this.getLineFeedCnt(m.bufferIndex,I,m.end),m.length-1);s.piece=b,t+=`
`,(0,S.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&i.push(s)}const u=this.createNewPieces(t);let d=this.rbInsertLeft(s,u[u.length-1]);for(let m=u.length-2;m>=0;m--)d=this.rbInsertLeft(d,u[m]);this.validateCRLFWithPrevNode(d),this.deleteNodes(i)}insertContentToNodeRight(t,s){this.adjustCarriageReturnFromNext(t,s)&&(t+=`
`);const i=this.createNewPieces(t),u=this.rbInsertRight(s,i[0]);let d=u;for(let m=1;m<i.length;m++)d=this.rbInsertRight(d,i[m]);this.validateCRLFWithPrevNode(u)}positionInBuffer(t,s,i){const u=t.piece,d=t.piece.bufferIndex,m=this._buffers[d].lineStarts,b=m[u.start.line]+u.start.column+s;let a=u.start.line,o=u.end.line,f=0,r=0,h=0;for(;a<=o&&(f=a+(o-a)/2|0,h=m[f],f!==o);)if(r=m[f+1],b<h)o=f-1;else if(b>=r)a=f+1;else break;return i?(i.line=f,i.column=b-h,null):{line:f,column:b-h}}getLineFeedCnt(t,s,i){if(i.column===0)return i.line-s.line;const u=this._buffers[t].lineStarts;if(i.line===u.length-1)return i.line-s.line;const d=u[i.line+1],m=u[i.line]+i.column;if(d>m+1)return i.line-s.line;const I=m-1;return this._buffers[t].buffer.charCodeAt(I)===13?i.line-s.line+1:i.line-s.line}offsetInBuffer(t,s){return this._buffers[t].lineStarts[s.line]+s.column}deleteNodes(t){for(let s=0;s<t.length;s++)(0,S.rbDelete)(this,t[s])}createNewPieces(t){if(t.length>e.AverageBufferSize){const o=[];for(;t.length>e.AverageBufferSize;){const r=t.charCodeAt(e.AverageBufferSize-1);let h;r===13||r>=55296&&r<=56319?(h=t.substring(0,e.AverageBufferSize-1),t=t.substring(e.AverageBufferSize-1)):(h=t.substring(0,e.AverageBufferSize),t=t.substring(e.AverageBufferSize));const E=w(h);o.push(new N(this._buffers.length,{line:0,column:0},{line:E.length-1,column:h.length-E[E.length-1]},E.length-1,h.length)),this._buffers.push(new L(h,E))}const f=w(t);return o.push(new N(this._buffers.length,{line:0,column:0},{line:f.length-1,column:t.length-f[f.length-1]},f.length-1,t.length)),this._buffers.push(new L(t,f)),o}let s=this._buffers[0].buffer.length;const i=w(t,!1);let u=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===s&&s!==0&&this.startWithLF(t)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},u=this._lastChangeBufferPos;for(let o=0;o<i.length;o++)i[o]+=s+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+t,s+=1}else{if(s!==0)for(let o=0;o<i.length;o++)i[o]+=s;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=t}const d=this._buffers[0].buffer.length,m=this._buffers[0].lineStarts.length-1,I=d-this._buffers[0].lineStarts[m],b={line:m,column:I},a=new N(0,u,b,this.getLineFeedCnt(0,u,b),d-s);return this._lastChangeBufferPos=b,[a]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(t,s=0){let i=this.root,u="";const d=this._searchCache.get2(t);if(d){i=d.node;const m=this.getAccumulatedValue(i,t-d.nodeStartLineNumber-1),I=this._buffers[i.piece.bufferIndex].buffer,b=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(d.nodeStartLineNumber+i.piece.lineFeedCnt===t)u=I.substring(b+m,b+i.piece.length);else{const a=this.getAccumulatedValue(i,t-d.nodeStartLineNumber);return I.substring(b+m,b+a-s)}}else{let m=0;const I=t;for(;i!==S.SENTINEL;)if(i.left!==S.SENTINEL&&i.lf_left>=t-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>t-1){const b=this.getAccumulatedValue(i,t-i.lf_left-2),a=this.getAccumulatedValue(i,t-i.lf_left-1),o=this._buffers[i.piece.bufferIndex].buffer,f=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return m+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:m,nodeStartLineNumber:I-(t-1-i.lf_left)}),o.substring(f+b,f+a-s)}else if(i.lf_left+i.piece.lineFeedCnt===t-1){const b=this.getAccumulatedValue(i,t-i.lf_left-2),a=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);u=a.substring(o+b,o+i.piece.length);break}else t-=i.lf_left+i.piece.lineFeedCnt,m+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==S.SENTINEL;){const m=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const I=this.getAccumulatedValue(i,0),b=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return u+=m.substring(b,b+I-s),u}else{const I=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);u+=m.substr(I,i.piece.length)}i=i.next()}return u}computeBufferMetadata(){let t=this.root,s=1,i=0;for(;t!==S.SENTINEL;)s+=t.lf_left+t.piece.lineFeedCnt,i+=t.size_left+t.piece.length,t=t.right;this._lineCnt=s,this._length=i,this._searchCache.validate(this._length)}getIndexOf(t,s){const i=t.piece,u=this.positionInBuffer(t,s),d=u.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===s){const m=this.getLineFeedCnt(t.piece.bufferIndex,i.start,u);if(m!==d)return{index:m,remainder:0}}return{index:d,remainder:u.column}}getAccumulatedValue(t,s){if(s<0)return 0;const i=t.piece,u=this._buffers[i.bufferIndex].lineStarts,d=i.start.line+s+1;return d>i.end.line?u[i.end.line]+i.end.column-u[i.start.line]-i.start.column:u[d]-u[i.start.line]-i.start.column}deleteNodeTail(t,s){const i=t.piece,u=i.lineFeedCnt,d=this.offsetInBuffer(i.bufferIndex,i.end),m=s,I=this.offsetInBuffer(i.bufferIndex,m),b=this.getLineFeedCnt(i.bufferIndex,i.start,m),a=b-u,o=I-d,f=i.length+o;t.piece=new N(i.bufferIndex,i.start,m,b,f),(0,S.updateTreeMetadata)(this,t,o,a)}deleteNodeHead(t,s){const i=t.piece,u=i.lineFeedCnt,d=this.offsetInBuffer(i.bufferIndex,i.start),m=s,I=this.getLineFeedCnt(i.bufferIndex,m,i.end),b=this.offsetInBuffer(i.bufferIndex,m),a=I-u,o=d-b,f=i.length+o;t.piece=new N(i.bufferIndex,m,i.end,I,f),(0,S.updateTreeMetadata)(this,t,o,a)}shrinkNode(t,s,i){const u=t.piece,d=u.start,m=u.end,I=u.length,b=u.lineFeedCnt,a=s,o=this.getLineFeedCnt(u.bufferIndex,u.start,a),f=this.offsetInBuffer(u.bufferIndex,s)-this.offsetInBuffer(u.bufferIndex,d);t.piece=new N(u.bufferIndex,u.start,a,o,f),(0,S.updateTreeMetadata)(this,t,f-I,o-b);const r=new N(u.bufferIndex,i,m,this.getLineFeedCnt(u.bufferIndex,i,m),this.offsetInBuffer(u.bufferIndex,m)-this.offsetInBuffer(u.bufferIndex,i)),h=this.rbInsertRight(t,r);this.validateCRLFWithPrevNode(h)}appendToNode(t,s){this.adjustCarriageReturnFromNext(s,t)&&(s+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(s)&&this.endWithCR(t),u=this._buffers[0].buffer.length;this._buffers[0].buffer+=s;const d=w(s,!1);for(let h=0;h<d.length;h++)d[h]+=u;if(i){const h=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:u-h}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(d.slice(1));const m=this._buffers[0].lineStarts.length-1,I=this._buffers[0].buffer.length-this._buffers[0].lineStarts[m],b={line:m,column:I},a=t.piece.length+s.length,o=t.piece.lineFeedCnt,f=this.getLineFeedCnt(0,t.piece.start,b),r=f-o;t.piece=new N(t.piece.bufferIndex,t.piece.start,b,f,a),this._lastChangeBufferPos=b,(0,S.updateTreeMetadata)(this,t,s.length,r)}nodeAt(t){let s=this.root;const i=this._searchCache.get(t);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:t-i.nodeStartOffset};let u=0;for(;s!==S.SENTINEL;)if(s.size_left>t)s=s.left;else if(s.size_left+s.piece.length>=t){u+=s.size_left;const d={node:s,remainder:t-s.size_left,nodeStartOffset:u};return this._searchCache.set(d),d}else t-=s.size_left+s.piece.length,u+=s.size_left+s.piece.length,s=s.right;return null}nodeAt2(t,s){let i=this.root,u=0;for(;i!==S.SENTINEL;)if(i.left!==S.SENTINEL&&i.lf_left>=t-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>t-1){const d=this.getAccumulatedValue(i,t-i.lf_left-2),m=this.getAccumulatedValue(i,t-i.lf_left-1);return u+=i.size_left,{node:i,remainder:Math.min(d+s-1,m),nodeStartOffset:u}}else if(i.lf_left+i.piece.lineFeedCnt===t-1){const d=this.getAccumulatedValue(i,t-i.lf_left-2);if(d+s-1<=i.piece.length)return{node:i,remainder:d+s-1,nodeStartOffset:u};s-=i.piece.length-d;break}else t-=i.lf_left+i.piece.lineFeedCnt,u+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==S.SENTINEL;){if(i.piece.lineFeedCnt>0){const d=this.getAccumulatedValue(i,0),m=this.offsetOfNode(i);return{node:i,remainder:Math.min(s-1,d),nodeStartOffset:m}}else if(i.piece.length>=s-1){const d=this.offsetOfNode(i);return{node:i,remainder:s-1,nodeStartOffset:d}}else s-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(t,s){if(t.piece.lineFeedCnt<1)return-1;const i=this._buffers[t.piece.bufferIndex],u=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start)+s;return i.buffer.charCodeAt(u)}offsetOfNode(t){if(!t)return 0;let s=t.size_left;for(;t!==this.root;)t.parent.right===t&&(s+=t.parent.size_left+t.parent.piece.length),t=t.parent;return s}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===S.SENTINEL||t.piece.lineFeedCnt===0)return!1;const s=t.piece,i=this._buffers[s.bufferIndex].lineStarts,u=s.start.line,d=i[u]+s.start.column;return u===i.length-1||i[u+1]>d+1?!1:this._buffers[s.bufferIndex].buffer.charCodeAt(d)===10}endWithCR(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t===S.SENTINEL||t.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(t,t.piece.length-1)===13}validateCRLFWithPrevNode(t){if(this.shouldCheckCRLF()&&this.startWithLF(t)){const s=t.prev();this.endWithCR(s)&&this.fixCRLF(s,t)}}validateCRLFWithNextNode(t){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const s=t.next();this.startWithLF(s)&&this.fixCRLF(t,s)}}fixCRLF(t,s){const i=[],u=this._buffers[t.piece.bufferIndex].lineStarts;let d;t.piece.end.column===0?d={line:t.piece.end.line-1,column:u[t.piece.end.line]-u[t.piece.end.line-1]-1}:d={line:t.piece.end.line,column:t.piece.end.column-1};const m=t.piece.length-1,I=t.piece.lineFeedCnt-1;t.piece=new N(t.piece.bufferIndex,t.piece.start,d,I,m),(0,S.updateTreeMetadata)(this,t,-1,-1),t.piece.length===0&&i.push(t);const b={line:s.piece.start.line+1,column:0},a=s.piece.length-1,o=this.getLineFeedCnt(s.piece.bufferIndex,b,s.piece.end);s.piece=new N(s.piece.bufferIndex,b,s.piece.end,o,a),(0,S.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&i.push(s);const f=this.createNewPieces(`\r
`);this.rbInsertRight(t,f[0]);for(let r=0;r<i.length;r++)(0,S.rbDelete)(this,i[r])}adjustCarriageReturnFromNext(t,s){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const i=s.next();if(this.startWithLF(i)){if(t+=`
`,i.piece.length===1)(0,S.rbDelete)(this,i);else{const u=i.piece,d={line:u.start.line+1,column:0},m=u.length-1,I=this.getLineFeedCnt(u.bufferIndex,d,u.end);i.piece=new N(u.bufferIndex,d,u.end,I,m),(0,S.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(t,s){if(t===S.SENTINEL)return s(S.SENTINEL);const i=this.iterate(t.left,s);return i&&s(t)&&this.iterate(t.right,s)}getNodeContent(t){if(t===S.SENTINEL)return"";const s=this._buffers[t.piece.bufferIndex],i=t.piece,u=this.offsetInBuffer(i.bufferIndex,i.start),d=this.offsetInBuffer(i.bufferIndex,i.end);return s.buffer.substring(u,d)}getPieceContent(t){const s=this._buffers[t.bufferIndex],i=this.offsetInBuffer(t.bufferIndex,t.start),u=this.offsetInBuffer(t.bufferIndex,t.end);return s.buffer.substring(i,u)}rbInsertRight(t,s){const i=new S.TreeNode(s,1);if(i.left=S.SENTINEL,i.right=S.SENTINEL,i.parent=S.SENTINEL,i.size_left=0,i.lf_left=0,this.root===S.SENTINEL)this.root=i,i.color=0;else if(t.right===S.SENTINEL)t.right=i,i.parent=t;else{const d=(0,S.leftest)(t.right);d.left=i,i.parent=d}return(0,S.fixInsert)(this,i),i}rbInsertLeft(t,s){const i=new S.TreeNode(s,1);if(i.left=S.SENTINEL,i.right=S.SENTINEL,i.parent=S.SENTINEL,i.size_left=0,i.lf_left=0,this.root===S.SENTINEL)this.root=i,i.color=0;else if(t.left===S.SENTINEL)t.left=i,i.parent=t;else{const u=(0,S.righttest)(t.left);u.right=i,i.parent=u}return(0,S.fixInsert)(this,i),i}getContentOfSubTree(t){let s="";return this.iterate(t,i=>(s+=this.getNodeContent(i),!0)),s}}e.PieceTreeBase=c}),define(ne[26],ie([0,1,19,2,11,25,10,21,23,6]),function(te,e,B,M,F,S,A,V,k,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class y extends w.Disposable{constructor(L,T,_,c,l,t,s){super(),this._onDidChangeContent=this._register(new B.Emitter),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=T,this._mightContainNonBasicASCII=!t,this._mightContainRTL=c,this._mightContainUnusualLineTerminators=l,this._pieceTree=new A.PieceTreeBase(L,_,s)}equals(L){return!(L instanceof y)||this._BOM!==L._BOM||this.getEOL()!==L.getEOL()?!1:this._pieceTree.equal(L._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(L){return this._pieceTree.createSnapshot(L?this._BOM:"")}getOffsetAt(L,T){return this._pieceTree.getOffsetAt(L,T)}getPositionAt(L){return this._pieceTree.getPositionAt(L)}getRangeAt(L,T){const _=L+T,c=this.getPositionAt(L),l=this.getPositionAt(_);return new F.Range(c.lineNumber,c.column,l.lineNumber,l.column)}getValueInRange(L,T=0){if(L.isEmpty())return"";const _=this._getEndOfLine(T);return this._pieceTree.getValueInRange(L,_)}getValueLengthInRange(L,T=0){if(L.isEmpty())return 0;if(L.startLineNumber===L.endLineNumber)return L.endColumn-L.startColumn;const _=this.getOffsetAt(L.startLineNumber,L.startColumn);return this.getOffsetAt(L.endLineNumber,L.endColumn)-_}getCharacterCountInRange(L,T=0){if(this._mightContainNonBasicASCII){let _=0;const c=L.startLineNumber,l=L.endLineNumber;for(let t=c;t<=l;t++){const s=this.getLineContent(t),i=t===c?L.startColumn-1:0,u=t===l?L.endColumn-1:s.length;for(let d=i;d<u;d++)M.isHighSurrogate(s.charCodeAt(d))?(_=_+1,d=d+1):_=_+1}return _+=this._getEndOfLine(T).length*(l-c),_}return this.getValueLengthInRange(L,T)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(L){return this._pieceTree.getLineContent(L)}getLineCharCode(L,T){return this._pieceTree.getLineCharCode(L,T)}getCharCode(L){return this._pieceTree.getCharCode(L)}getLineLength(L){return this._pieceTree.getLineLength(L)}getLineMinColumn(L){return 1}getLineMaxColumn(L){return this.getLineLength(L)+1}getLineFirstNonWhitespaceColumn(L){const T=M.firstNonWhitespaceIndex(this.getLineContent(L));return T===-1?0:T+1}getLineLastNonWhitespaceColumn(L){const T=M.lastNonWhitespaceIndex(this.getLineContent(L));return T===-1?0:T+2}_getEndOfLine(L){switch(L){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(L){this._pieceTree.setEOL(L)}applyEdits(L,T,_){let c=this._mightContainRTL,l=this._mightContainUnusualLineTerminators,t=this._mightContainNonBasicASCII,s=!0,i=[];for(let o=0;o<L.length;o++){const f=L[o];s&&f._isTracked&&(s=!1);const r=f.range;if(f.text){let j=!0;t||(j=!M.isBasicASCII(f.text),t=j),!c&&j&&(c=M.containsRTL(f.text)),!l&&j&&(l=M.containsUnusualLineTerminators(f.text))}let h="",E=0,P=0,q=0;if(f.text){let j;[E,P,q,j]=(0,V.countEOL)(f.text);const O=this.getEOL();j===0||j===(O===`\r
`?2:1)?h=f.text:h=f.text.replace(/\r\n|\r|\n/g,O)}i[o]={sortIndex:o,identifier:f.identifier||null,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r),text:h,eolCount:E,firstLineLength:P,lastLineLength:q,forceMoveMarkers:Boolean(f.forceMoveMarkers),isAutoWhitespaceEdit:f.isAutoWhitespaceEdit||!1}}i.sort(y._sortOpsAscending);let u=!1;for(let o=0,f=i.length-1;o<f;o++){const r=i[o].range.getEndPosition(),h=i[o+1].range.getStartPosition();if(h.isBeforeOrEqual(r)){if(h.isBefore(r))throw new Error("Overlapping ranges are not allowed!");u=!0}}s&&(i=this._reduceOperations(i));const d=_||T?y._getInverseEditRanges(i):[],m=[];if(T)for(let o=0;o<i.length;o++){const f=i[o],r=d[o];if(f.isAutoWhitespaceEdit&&f.range.isEmpty())for(let h=r.startLineNumber;h<=r.endLineNumber;h++){let E="";h===r.startLineNumber&&(E=this.getLineContent(f.range.startLineNumber),M.firstNonWhitespaceIndex(E)!==-1)||m.push({lineNumber:h,oldContent:E})}}let I=null;if(_){let o=0;I=[];for(let f=0;f<i.length;f++){const r=i[f],h=d[f],E=this.getValueInRange(r.range),P=r.rangeOffset+o;o+=r.text.length-E.length,I[f]={sortIndex:r.sortIndex,identifier:r.identifier,range:h,text:E,textChange:new k.TextChange(r.rangeOffset,E,P,r.text)}}u||I.sort((f,r)=>f.sortIndex-r.sortIndex)}this._mightContainRTL=c,this._mightContainUnusualLineTerminators=l,this._mightContainNonBasicASCII=t;const b=this._doApplyEdits(i);let a=null;if(T&&m.length>0){m.sort((o,f)=>f.lineNumber-o.lineNumber),a=[];for(let o=0,f=m.length;o<f;o++){const r=m[o].lineNumber;if(o>0&&m[o-1].lineNumber===r)continue;const h=m[o].oldContent,E=this.getLineContent(r);E.length===0||E===h||M.firstNonWhitespaceIndex(E)!==-1||a.push(r)}}return this._onDidChangeContent.fire(),new S.ApplyEditsResult(I,b,a)}_reduceOperations(L){return L.length<1e3?L:[this._toSingleEditOperation(L)]}_toSingleEditOperation(L){let T=!1;const _=L[0].range,c=L[L.length-1].range,l=new F.Range(_.startLineNumber,_.startColumn,c.endLineNumber,c.endColumn);let t=_.startLineNumber,s=_.startColumn;const i=[];for(let b=0,a=L.length;b<a;b++){const o=L[b],f=o.range;T=T||o.forceMoveMarkers,i.push(this.getValueInRange(new F.Range(t,s,f.startLineNumber,f.startColumn))),o.text.length>0&&i.push(o.text),t=f.endLineNumber,s=f.endColumn}const u=i.join(""),[d,m,I]=(0,V.countEOL)(u);return{sortIndex:0,identifier:L[0].identifier,range:l,rangeOffset:this.getOffsetAt(l.startLineNumber,l.startColumn),rangeLength:this.getValueLengthInRange(l,0),text:u,eolCount:d,firstLineLength:m,lastLineLength:I,forceMoveMarkers:T,isAutoWhitespaceEdit:!1}}_doApplyEdits(L){L.sort(y._sortOpsDescending);const T=[];for(let _=0;_<L.length;_++){const c=L[_],l=c.range.startLineNumber,t=c.range.startColumn,s=c.range.endLineNumber,i=c.range.endColumn;if(l===s&&t===i&&c.text.length===0)continue;c.text?(this._pieceTree.delete(c.rangeOffset,c.rangeLength),this._pieceTree.insert(c.rangeOffset,c.text,!0)):this._pieceTree.delete(c.rangeOffset,c.rangeLength);const u=new F.Range(l,t,s,i);T.push({range:u,rangeLength:c.rangeLength,text:c.text,rangeOffset:c.rangeOffset,forceMoveMarkers:c.forceMoveMarkers})}return T}findMatchesLineByLine(L,T,_,c){return this._pieceTree.findMatchesLineByLine(L,T,_,c)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(L,T){const _=L.startLineNumber,c=L.startColumn,[l,t,s]=(0,V.countEOL)(T);let i;if(T.length>0){const u=l+1;u===1?i=new F.Range(_,c,_,c+t):i=new F.Range(_,c,_+u-1,s+1)}else i=new F.Range(_,c,_,c);return i}static _getInverseEditRanges(L){const T=[];let _=0,c=0,l=null;for(let t=0,s=L.length;t<s;t++){const i=L[t];let u,d;l?l.range.endLineNumber===i.range.startLineNumber?(u=_,d=c+(i.range.startColumn-l.range.endColumn)):(u=_+(i.range.startLineNumber-l.range.endLineNumber),d=i.range.startColumn):(u=i.range.startLineNumber,d=i.range.startColumn);let m;if(i.text.length>0){const I=i.eolCount+1;I===1?m=new F.Range(u,d,u,d+i.firstLineLength):m=new F.Range(u,d,u+I-1,i.lastLineLength+1)}else m=new F.Range(u,d,u,d);_=m.endLineNumber,c=m.endColumn,T.push(m),l=i}return T}static _sortOpsAscending(L,T){const _=F.Range.compareRangesUsingEnds(L.range,T.range);return _===0?L.sortIndex-T.sortIndex:_}static _sortOpsDescending(L,T){const _=F.Range.compareRangesUsingEnds(L.range,T.range);return _===0?T.sortIndex-L.sortIndex:-_}}e.PieceTreeTextBuffer=y}),define(ne[27],ie([0,1,2,10,26]),function(te,e,B,M,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=e.PieceTreeTextBufferFactory=void 0;class S{constructor(k,w,y,N,L,T,_,c,l){this._chunks=k,this._bom=w,this._cr=y,this._lf=N,this._crlf=L,this._containsRTL=T,this._containsUnusualLineTerminators=_,this._isBasicASCII=c,this._normalizeEOL=l}_getEOL(k){const w=this._cr+this._lf+this._crlf,y=this._cr+this._crlf;return w===0?k===1?`
`:`\r
`:y>w/2?`\r
`:`
`}create(k){const w=this._getEOL(k),y=this._chunks;if(this._normalizeEOL&&(w===`\r
`&&(this._cr>0||this._lf>0)||w===`
`&&(this._cr>0||this._crlf>0)))for(let L=0,T=y.length;L<T;L++){const _=y[L].buffer.replace(/\r\n|\r|\n/g,w),c=(0,M.createLineStartsFast)(_);y[L]=new M.StringBuffer(_,c)}const N=new F.PieceTreeTextBuffer(y,this._bom,w,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:N,disposable:N}}getFirstLineText(k){return this._chunks[0].buffer.substr(0,k).split(/\r\n|\r|\n/)[0]}}e.PieceTreeTextBufferFactory=S;class A{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(k){if(k.length===0)return;this.chunks.length===0&&B.startsWithUTF8BOM(k)&&(this.BOM=B.UTF8_BOM_CHARACTER,k=k.substr(1));const w=k.charCodeAt(k.length-1);w===13||w>=55296&&w<=56319?(this._acceptChunk1(k.substr(0,k.length-1),!1),this._hasPreviousChar=!0,this._previousChar=w):(this._acceptChunk1(k,!1),this._hasPreviousChar=!1,this._previousChar=w)}_acceptChunk1(k,w){!w&&k.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+k):this._acceptChunk2(k))}_acceptChunk2(k){const w=(0,M.createLineStarts)(this._tmpLineStarts,k);this.chunks.push(new M.StringBuffer(k,w.lineStarts)),this.cr+=w.cr,this.lf+=w.lf,this.crlf+=w.crlf,this.isBasicASCII&&(this.isBasicASCII=w.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=B.containsRTL(k)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=B.containsUnusualLineTerminators(k))}finish(k=!0){return this._finish(),new S(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,k)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const k=this.chunks[this.chunks.length-1];k.buffer+=String.fromCharCode(this._previousChar);const w=(0,M.createLineStartsFast)(k.buffer);k.lineStarts=w,this._previousChar===13&&this.cr++}}}e.PieceTreeTextBufferBuilder=A}),define(ne[28],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var B;(function(A){A.serviceIds=new Map,A.DI_TARGET="$di$target",A.DI_DEPENDENCIES="$di$dependencies";function V(k){return k[A.DI_DEPENDENCIES]||[]}A.getServiceDependencies=V})(B=e._util||(e._util={})),e.IInstantiationService=F("instantiationService");function M(A,V,k){V[B.DI_TARGET]===V?V[B.DI_DEPENDENCIES].push({id:A,index:k}):(V[B.DI_DEPENDENCIES]=[{id:A,index:k}],V[B.DI_TARGET]=V)}function F(A){if(B.serviceIds.has(A))return B.serviceIds.get(A);const V=function(k,w,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");M(V,k,y)};return V.toString=()=>A,B.serviceIds.set(A,V),V}e.createDecorator=F;function S(A){return A}e.refineServiceDecorator=S}),define(ne[29],ie([0,1,3,2,28]),function(te,e,B,M,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.SET_CONTEXT_COMMAND_ID=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const S=new Map;S.set("false",!1),S.set("true",!0),S.set("isMac",B.isMacintosh),S.set("isLinux",B.isLinux),S.set("isWindows",B.isWindows),S.set("isWeb",B.isWeb),S.set("isMacNative",B.isMacintosh&&!B.isWeb),S.set("isEdge",B.isEdge),S.set("isFirefox",B.isFirefox),S.set("isChrome",B.isChrome),S.set("isSafari",B.isSafari);const A=Object.prototype.hasOwnProperty;var V;(function(O){O[O.False=0]="False",O[O.True=1]="True",O[O.Defined=2]="Defined",O[O.Not=3]="Not",O[O.Equals=4]="Equals",O[O.NotEquals=5]="NotEquals",O[O.And=6]="And",O[O.Regex=7]="Regex",O[O.NotRegex=8]="NotRegex",O[O.Or=9]="Or",O[O.In=10]="In",O[O.NotIn=11]="NotIn",O[O.Greater=12]="Greater",O[O.GreaterEquals=13]="GreaterEquals",O[O.Smaller=14]="Smaller",O[O.SmallerEquals=15]="SmallerEquals"})(V=e.ContextKeyExprType||(e.ContextKeyExprType={}));class k{static false(){return N.INSTANCE}static true(){return L.INSTANCE}static has(n){return T.create(n)}static equals(n,p){return _.create(n,p)}static notEquals(n,p){return t.create(n,p)}static regex(n,p){return b.create(n,p)}static in(n,p){return c.create(n,p)}static notIn(n,p){return l.create(n,p)}static not(n){return s.create(n)}static and(...n){return f.create(n,null)}static or(...n){return r.create(n,null,!0)}static greater(n,p){return u.create(n,p)}static greaterEquals(n,p){return d.create(n,p)}static smaller(n,p){return m.create(n,p)}static smallerEquals(n,p){return I.create(n,p)}static deserialize(n,p=!1){if(!!n)return this._deserializeOrExpression(n,p)}static _deserializeOrExpression(n,p){const C=n.split("||");return r.create(C.map(W=>this._deserializeAndExpression(W,p)),null,!0)}static _deserializeAndExpression(n,p){const C=n.split("&&");return f.create(C.map(W=>this._deserializeOne(W,p)),null)}static _deserializeOne(n,p){if(n=n.trim(),n.indexOf("!=")>=0){const C=n.split("!=");return t.create(C[0].trim(),this._deserializeValue(C[1],p))}if(n.indexOf("==")>=0){const C=n.split("==");return _.create(C[0].trim(),this._deserializeValue(C[1],p))}if(n.indexOf("=~")>=0){const C=n.split("=~");return b.create(C[0].trim(),this._deserializeRegexValue(C[1],p))}if(n.indexOf(" not in ")>=0){const C=n.split(" not in ");return l.create(C[0].trim(),C[1].trim())}if(n.indexOf(" in ")>=0){const C=n.split(" in ");return c.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(n)){const C=n.split(">=");return d.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(n)){const C=n.split(">");return u.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(n)){const C=n.split("<=");return I.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(n)){const C=n.split("<");return m.create(C[0].trim(),C[1].trim())}return/^\!\s*/.test(n)?s.create(n.substr(1).trim()):T.create(n)}static _deserializeValue(n,p){if(n=n.trim(),n==="true")return!0;if(n==="false")return!1;const C=/^'([^']*)'$/.exec(n);return C?C[1].trim():n}static _deserializeRegexValue(n,p){if((0,M.isFalsyOrWhitespace)(n)){if(p)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const C=n.indexOf("/"),W=n.lastIndexOf("/");if(C===W||C<0){if(p)throw new Error(`bad regexp-value '${n}', missing /-enclosure`);return console.warn(`bad regexp-value '${n}', missing /-enclosure`),null}const G=n.slice(C+1,W),X=n[W+1]==="i"?"i":"";try{return new RegExp(G,X)}catch(J){if(p)throw new Error(`bad regexp-value '${n}', parse error: ${J}`);return console.warn(`bad regexp-value '${n}', parse error: ${J}`),null}}}e.ContextKeyExpr=k;function w(O,n){const p=O?O.substituteConstants():void 0,C=n?n.substituteConstants():void 0;return!p&&!C?!0:!p||!C?!1:p.equals(C)}e.expressionsAreEqualWithConstantSubstitution=w;function y(O,n){return O.cmp(n)}class N{constructor(){this.type=0}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!1}serialize(){return"false"}keys(){return[]}map(n){return this}negate(){return L.INSTANCE}}e.ContextKeyFalseExpr=N,N.INSTANCE=new N;class L{constructor(){this.type=1}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!0}serialize(){return"true"}keys(){return[]}map(n){return this}negate(){return N.INSTANCE}}e.ContextKeyTrueExpr=L,L.INSTANCE=new L;class T{static create(n,p=null){const C=S.get(n);return typeof C=="boolean"?C?L.INSTANCE:N.INSTANCE:new T(n,p)}constructor(n,p){this.key=n,this.negated=p,this.type=2}cmp(n){return n.type!==this.type?this.type-n.type:E(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=S.get(this.key);return typeof n=="boolean"?n?L.INSTANCE:N.INSTANCE:this}evaluate(n){return!!n.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(n){return n.mapDefined(this.key)}negate(){return this.negated||(this.negated=s.create(this.key,this)),this.negated}}e.ContextKeyDefinedExpr=T;class _{static create(n,p,C=null){if(typeof p=="boolean")return p?T.create(n,C):s.create(n,C);const W=S.get(n);return typeof W=="boolean"?p===(W?"true":"false")?L.INSTANCE:N.INSTANCE:new _(n,p,C)}constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=4}cmp(n){return n.type!==this.type?this.type-n.type:P(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=S.get(this.key);if(typeof n=="boolean"){const p=n?"true":"false";return this.value===p?L.INSTANCE:N.INSTANCE}return this}evaluate(n){return n.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(n){return n.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=t.create(this.key,this.value,this)),this.negated}}e.ContextKeyEqualsExpr=_;class c{static create(n,p){return new c(n,p)}constructor(n,p){this.key=n,this.valueKey=p,this.type=10,this.negated=null}cmp(n){return n.type!==this.type?this.type-n.type:P(this.key,this.valueKey,n.key,n.valueKey)}equals(n){return n.type===this.type?this.key===n.key&&this.valueKey===n.valueKey:!1}substituteConstants(){return this}evaluate(n){const p=n.getValue(this.valueKey),C=n.getValue(this.key);return Array.isArray(p)?p.includes(C):typeof C=="string"&&typeof p=="object"&&p!==null?A.call(p,C):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(n){return n.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=l.create(this.key,this.valueKey)),this.negated}}e.ContextKeyInExpr=c;class l{static create(n,p){return new l(n,p)}constructor(n,p){this.key=n,this.valueKey=p,this.type=11,this._negated=c.create(n,p)}cmp(n){return n.type!==this.type?this.type-n.type:this._negated.cmp(n._negated)}equals(n){return n.type===this.type?this._negated.equals(n._negated):!1}substituteConstants(){return this}evaluate(n){return!this._negated.evaluate(n)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(n){return n.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}e.ContextKeyNotInExpr=l;class t{static create(n,p,C=null){if(typeof p=="boolean")return p?s.create(n,C):T.create(n,C);const W=S.get(n);return typeof W=="boolean"?p===(W?"true":"false")?N.INSTANCE:L.INSTANCE:new t(n,p,C)}constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=5}cmp(n){return n.type!==this.type?this.type-n.type:P(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=S.get(this.key);if(typeof n=="boolean"){const p=n?"true":"false";return this.value===p?N.INSTANCE:L.INSTANCE}return this}evaluate(n){return n.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(n){return n.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=_.create(this.key,this.value,this)),this.negated}}e.ContextKeyNotEqualsExpr=t;class s{static create(n,p=null){const C=S.get(n);return typeof C=="boolean"?C?N.INSTANCE:L.INSTANCE:new s(n,p)}constructor(n,p){this.key=n,this.negated=p,this.type=3}cmp(n){return n.type!==this.type?this.type-n.type:E(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=S.get(this.key);return typeof n=="boolean"?n?N.INSTANCE:L.INSTANCE:this}evaluate(n){return!n.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(n){return n.mapNot(this.key)}negate(){return this.negated||(this.negated=T.create(this.key,this)),this.negated}}e.ContextKeyNotExpr=s;function i(O,n){if(typeof O=="string"){const p=parseFloat(O);isNaN(p)||(O=p)}return typeof O=="string"||typeof O=="number"?n(O):N.INSTANCE}class u{static create(n,p,C=null){return i(p,W=>new u(n,W,C))}constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=12}cmp(n){return n.type!==this.type?this.type-n.type:P(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=I.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterExpr=u;class d{static create(n,p,C=null){return i(p,W=>new d(n,W,C))}constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=13}cmp(n){return n.type!==this.type?this.type-n.type:P(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=m.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterEqualsExpr=d;class m{static create(n,p,C=null){return i(p,W=>new m(n,W,C))}constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=14}cmp(n){return n.type!==this.type?this.type-n.type:P(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=d.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerExpr=m;class I{static create(n,p,C=null){return i(p,W=>new I(n,W,C))}constructor(n,p,C){this.key=n,this.value=p,this.negated=C,this.type=15}cmp(n){return n.type!==this.type?this.type-n.type:P(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=u.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerEqualsExpr=I;class b{static create(n,p){return new b(n,p)}constructor(n,p){this.key=n,this.regexp=p,this.type=7,this.negated=null}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.key<n.key)return-1;if(this.key>n.key)return 1;const p=this.regexp?this.regexp.source:"",C=n.regexp?n.regexp.source:"";return p<C?-1:p>C?1:0}equals(n){if(n.type===this.type){const p=this.regexp?this.regexp.source:"",C=n.regexp?n.regexp.source:"";return this.key===n.key&&p===C}return!1}substituteConstants(){return this}evaluate(n){const p=n.getValue(this.key);return this.regexp?this.regexp.test(p):!1}serialize(){const n=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${n}`}keys(){return[this.key]}map(n){return n.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=a.create(this)),this.negated}}e.ContextKeyRegexExpr=b;class a{static create(n){return new a(n)}constructor(n){this._actual=n,this.type=8}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new a(this._actual.map(n))}negate(){return this._actual}}e.ContextKeyNotRegexExpr=a;function o(O){let n=null;for(let p=0,C=O.length;p<C;p++){const W=O[p].substituteConstants();if(O[p]!==W&&n===null){n=[];for(let G=0;G<p;G++)n[G]=O[G]}n!==null&&(n[p]=W)}return n===null?O:n}class f{static create(n,p){return f._normalizeArr(n,p)}constructor(n,p){this.expr=n,this.negated=p,this.type=6}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let p=0,C=this.expr.length;p<C;p++){const W=y(this.expr[p],n.expr[p]);if(W!==0)return W}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let p=0,C=this.expr.length;p<C;p++)if(!this.expr[p].equals(n.expr[p]))return!1;return!0}return!1}substituteConstants(){const n=o(this.expr);return n===this.expr?this:f.create(n,this.negated)}evaluate(n){for(let p=0,C=this.expr.length;p<C;p++)if(!this.expr[p].evaluate(n))return!1;return!0}static _normalizeArr(n,p){const C=[];let W=!1;for(const G of n)if(!!G){if(G.type===1){W=!0;continue}if(G.type===0)return N.INSTANCE;if(G.type===6){C.push(...G.expr);continue}C.push(G)}if(C.length===0&&W)return L.INSTANCE;if(C.length!==0){if(C.length===1)return C[0];C.sort(y);for(let G=1;G<C.length;G++)C[G-1].equals(C[G])&&(C.splice(G,1),G--);if(C.length===1)return C[0];for(;C.length>1;){const G=C[C.length-1];if(G.type!==9)break;C.pop();const X=C.pop(),J=C.length===0,z=r.create(G.expr.map(K=>f.create([K,X],null)),null,J);z&&(C.push(z),C.sort(y))}return C.length===1?C[0]:new f(C,p)}}serialize(){return this.expr.map(n=>n.serialize()).join(" && ")}keys(){const n=[];for(const p of this.expr)n.push(...p.keys());return n}map(n){return new f(this.expr.map(p=>p.map(n)),null)}negate(){if(!this.negated){const n=[];for(const p of this.expr)n.push(p.negate());this.negated=r.create(n,this,!0)}return this.negated}}class r{static create(n,p,C){return r._normalizeArr(n,p,C)}constructor(n,p){this.expr=n,this.negated=p,this.type=9}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let p=0,C=this.expr.length;p<C;p++){const W=y(this.expr[p],n.expr[p]);if(W!==0)return W}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let p=0,C=this.expr.length;p<C;p++)if(!this.expr[p].equals(n.expr[p]))return!1;return!0}return!1}substituteConstants(){const n=o(this.expr);return n===this.expr?this:r.create(n,this.negated,!1)}evaluate(n){for(let p=0,C=this.expr.length;p<C;p++)if(this.expr[p].evaluate(n))return!0;return!1}static _normalizeArr(n,p,C){let W=[],G=!1;if(n){for(let X=0,J=n.length;X<J;X++){const z=n[X];if(!!z){if(z.type===0){G=!0;continue}if(z.type===1)return L.INSTANCE;if(z.type===9){W=W.concat(z.expr);continue}W.push(z)}}if(W.length===0&&G)return N.INSTANCE;W.sort(y)}if(W.length!==0){if(W.length===1)return W[0];for(let X=1;X<W.length;X++)W[X-1].equals(W[X])&&(W.splice(X,1),X--);if(W.length===1)return W[0];if(C){for(let X=0;X<W.length;X++)for(let J=X+1;J<W.length;J++)q(W[X],W[J])&&(W.splice(J,1),J--);if(W.length===1)return W[0]}return new r(W,p)}}serialize(){return this.expr.map(n=>n.serialize()).join(" || ")}keys(){const n=[];for(const p of this.expr)n.push(...p.keys());return n}map(n){return new r(this.expr.map(p=>p.map(n)),null)}negate(){if(!this.negated){const n=[];for(const p of this.expr)n.push(p.negate());for(;n.length>1;){const p=n.shift(),C=n.shift(),W=[];for(const X of j(p))for(const J of j(C))W.push(f.create([X,J],null));const G=n.length===0;n.unshift(r.create(W,null,G))}this.negated=n[0]}return this.negated}}class h extends T{static all(){return h._info.values()}constructor(n,p,C){super(n,null),this._defaultValue=p,typeof C=="object"?h._info.push({...C,key:n}):C!==!0&&h._info.push({key:n,description:C,type:p!=null?typeof p:void 0})}bindTo(n){return n.createKey(this.key,this._defaultValue)}getValue(n){return n.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(n){return _.create(this.key,n)}notEqualsTo(n){return t.create(this.key,n)}}e.RawContextKey=h,h._info=[],e.IContextKeyService=(0,F.createDecorator)("contextKeyService"),e.SET_CONTEXT_COMMAND_ID="setContext";function E(O,n){return O<n?-1:O>n?1:0}function P(O,n,p,C){return O<p?-1:O>p?1:n<C?-1:n>C?1:0}function q(O,n){if(n.type===6&&O.type!==9&&O.type!==6){for(const W of n.expr)if(O.equals(W))return!0}const p=O.negate(),C=j(p).concat(j(n));C.sort(y);for(let W=0;W<C.length;W++){const X=C[W].negate();for(let J=W+1;J<C.length;J++){const z=C[J];if(X.equals(z))return!0}}return!1}e.implies=q;function j(O){return O.type===9?O.expr:[O]}}),define(ne[30],ie([0,1,5,20,35,12,8,4,3,29]),function(te,e,B,M,F,S,A,V,k,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTextStreamMime=e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor";var y;(function(r){r[r.Markup=1]="Markup",r[r.Code=2]="Code"})(y=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",S.Mimes.latex,S.Mimes.markdown,"image/png","image/jpeg",S.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[S.Mimes.latex,S.Mimes.markdown,"application/json",S.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.RENDERER_NOT_AVAILABLE="_notAvailable";var N;(function(r){r[r.Running=1]="Running",r[r.Idle=2]="Idle"})(N=e.NotebookRunState||(e.NotebookRunState={}));var L;(function(r){r[r.Unconfirmed=1]="Unconfirmed",r[r.Pending=2]="Pending",r[r.Executing=3]="Executing"})(L=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var T;(function(r){r[r.WithHardKernelDependency=0]="WithHardKernelDependency",r[r.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",r[r.Pure=2]="Pure",r[r.Never=3]="Never"})(T=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var _;(function(r){r.Always="always",r.Never="never",r.Optional="optional"})(_=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var c;(function(r){r[r.ModelChange=1]="ModelChange",r[r.Move=2]="Move",r[r.ChangeCellLanguage=5]="ChangeCellLanguage",r[r.Initialize=6]="Initialize",r[r.ChangeCellMetadata=7]="ChangeCellMetadata",r[r.Output=8]="Output",r[r.OutputItem=9]="OutputItem",r[r.ChangeCellContent=10]="ChangeCellContent",r[r.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",r[r.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",r[r.ChangeCellMime=13]="ChangeCellMime",r[r.Unknown=100]="Unknown"})(c=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var l;(function(r){r[r.Handle=0]="Handle",r[r.Index=1]="Index"})(l=e.SelectionStateType||(e.SelectionStateType={}));var t;(function(r){r[r.Replace=1]="Replace",r[r.Output=2]="Output",r[r.Metadata=3]="Metadata",r[r.CellLanguage=4]="CellLanguage",r[r.DocumentMetadata=5]="DocumentMetadata",r[r.Move=6]="Move",r[r.OutputItems=7]="OutputItems",r[r.PartialMetadata=8]="PartialMetadata",r[r.PartialInternalMetadata=9]="PartialInternalMetadata"})(t=e.CellEditType||(e.CellEditType={}));var s;(function(r){r.scheme=A.Schemas.vscodeNotebookCell;const h=["W","X","Y","Z","a","b","c","d","e","f"],E=new RegExp(`^[${h.join("")}]+`),P=7;function q(W,G){const X=G.toString(P),z=`${X.length<h.length?h[X.length-1]:"z"}${X}s${(0,B.encodeBase64)(B.VSBuffer.fromString(W.scheme),!0,!0)}`;return W.with({scheme:r.scheme,fragment:z})}r.generate=q;function j(W){if(W.scheme!==r.scheme)return;const G=W.fragment.indexOf("s");if(G<0)return;const X=parseInt(W.fragment.substring(0,G).replace(E,""),P),J=(0,B.decodeBase64)(W.fragment.substring(G+1)).toString();if(!isNaN(X))return{handle:X,notebook:W.with({scheme:J,fragment:null})}}r.parse=j;function O(W,G){return W.with({scheme:A.Schemas.vscodeNotebookCellOutput,fragment:`op${G??""},${W.scheme!==A.Schemas.file?W.scheme:""}`})}r.generateCellOutputUri=O;function n(W){if(W.scheme!==A.Schemas.vscodeNotebookCellOutput)return;const G=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(W.fragment);if(!G)return;const X=G[1]&&G[1]!==""?G[1]:void 0,J=G[2];return{outputId:X,notebook:W.with({scheme:J||A.Schemas.file,fragment:null})}}r.parseCellOutputUri=n;function p(W,G,X){return r.generate(W,G).with({scheme:X})}r.generateCellPropertyUri=p;function C(W,G){if(W.scheme===G)return r.parse(W.with({scheme:r.scheme}))}r.parseCellPropertyUri=C})(s=e.CellUri||(e.CellUri={}));const i=r=>k.isWindows?r.replace(/\//g,"\\"):r;class u{constructor(h=[],E=e.NOTEBOOK_DISPLAY_ORDER){this.defaultOrder=E,this.order=[...new Set(h)].map(P=>({pattern:P,matches:M.parse(i(P))}))}sort(h){const E=new Map(F.Iterable.map(h,q=>[q,i(q)]));let P=[];for(const{matches:q}of this.order)for(const[j,O]of E)if(q(O)){P.push(j),E.delete(j);break}return E.size&&(P=P.concat([...E.keys()].sort((q,j)=>this.defaultOrder.indexOf(q)-this.defaultOrder.indexOf(j)))),P}prioritize(h,E){const P=this.findIndex(h);if(P===-1){this.order.unshift({pattern:h,matches:M.parse(i(h))});return}const q=new Set(E.map(O=>this.findIndex(O,P)));q.delete(-1);const j=Array.from(q).sort();this.order.splice(P+1,0,...j.map(O=>this.order[O]));for(let O=j.length-1;O>=0;O--)this.order.splice(j[O],1)}toArray(){return this.order.map(h=>h.pattern)}findIndex(h,E=this.order.length){const P=i(h);for(let q=0;q<E;q++)if(this.order[q].matches(P))return q;return-1}}e.MimeTypeDisplayOrder=u;function d(r,h,E,P=(q,j)=>q===j){const q=[];function j(p,C,W){if(C===0&&W.length===0)return;const G=q[q.length-1];G&&G.start+G.deleteCount===p?(G.deleteCount+=C,G.toInsert.push(...W)):q.push({start:p,deleteCount:C,toInsert:W})}let O=0,n=0;for(;;){if(O===r.length){j(O,0,h.slice(n));break}if(n===h.length){j(O,r.length-O,[]);break}const p=r[O],C=h[n];if(P(p,C)){O+=1,n+=1;continue}E(C)?(j(O,1,[]),O+=1):(j(O,0,[C]),n+=1)}return q}e.diff=d,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new w.RawContextKey("notebookEditorCursorAtBoundary","none");var m;(function(r){r.default="default",r.option="option"})(m=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function I(r){const h=r;return!!((typeof h.include=="string"||M.isRelativePattern(h.include))&&(typeof h.exclude=="string"||M.isRelativePattern(h.exclude)))}e.isDocumentExcludePattern=I;function b(r,h,E){if(Array.isArray(r.viewType)&&r.viewType.indexOf(h)>=0||r.viewType===h)return!0;if(r.filenamePattern){const P=I(r.filenamePattern)?r.filenamePattern.include:r.filenamePattern,q=I(r.filenamePattern)?r.filenamePattern.exclude:void 0;if(M.match(P,(0,V.basename)(E.fsPath).toLowerCase()))return!(q&&M.match(q,(0,V.basename)(E.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=b,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily"};var a;(function(r){r[r.Left=1]="Left",r[r.Right=2]="Right"})(a=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class o{static create(h){return`${o._prefix}${h}`}static parse(h){if(h.startsWith(o._prefix))return h.substring(o._prefix.length)}}e.NotebookWorkingCopyTypeIdentifier=o,o._prefix="notebook/";function f(r){return["application/vnd.code.notebook.stdout","application/x.notebook.stdout","application/x.notebook.stream","application/vnd.code.notebook.stderr","application/x.notebook.stderr"].includes(r)}e.isTextStreamMime=f}),define(ne[36],ie([0,1,37,38,9,27,30,11]),function(te,e,B,M,F,S,A,V){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=e.CellSequence=void 0;function k(_){let c=(0,M.numberHash)(104579,0);for(let l=0;l<_.buffer.length;l++)c=(0,M.doHash)(_.buffer[l],c);return c}class w{get textBuffer(){if(this._textBuffer)return this._textBuffer;const c=new S.PieceTreeTextBufferBuilder;c.acceptChunk(Array.isArray(this._source)?this._source.join(`
`):this._source);const l=c.finish(!0);return this._textBuffer=l.create(1).textBuffer,this._textBuffer}primaryKey(){return this._primaryKey===void 0&&(this._primaryKey=(0,M.hash)(this.getValue())),this._primaryKey}constructor(c,l,t,s,i,u,d){this.handle=c,this._source=l,this.language=t,this.cellKind=s,this.outputs=i,this.metadata=u,this.internalMetadata=d,this._primaryKey=null,this._hash=null}getFullModelRange(){const c=this.textBuffer.getLineCount();return new V.Range(1,1,c,this.textBuffer.getLineLength(c)+1)}getValue(){const c=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(c,1):this.textBuffer.getValueInRange(c,2)}getComparisonValue(){return this._primaryKey!==null?this._primaryKey:(this._hash=(0,M.hash)([(0,M.hash)(this.language),(0,M.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(c=>({outputs:c.outputs.map(l=>({mime:l.mime,data:k(l.data)})),metadata:c.metadata}))]),this._hash)}getHashValue(){return this._hash!==null?this._hash:(this._hash=(0,M.hash)([(0,M.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this._hash)}}class y{constructor(c,l,t){this.uri=c,this.cells=l,this.metadata=t}acceptModelChanged(c){c.rawEvents.forEach(l=>{if(l.kind===A.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(l.changes);else if(l.kind===A.NotebookCellsChangeType.Move){const t=this.cells.splice(l.index,1);this.cells.splice(l.newIdx,0,...t)}else if(l.kind===A.NotebookCellsChangeType.Output){const t=this.cells[l.index];t.outputs=l.outputs}else if(l.kind===A.NotebookCellsChangeType.ChangeCellLanguage){const t=this.cells[l.index];t.language=l.language}else if(l.kind===A.NotebookCellsChangeType.ChangeCellMetadata){const t=this.cells[l.index];t.metadata=l.metadata}else if(l.kind===A.NotebookCellsChangeType.ChangeCellInternalMetadata){const t=this.cells[l.index];t.internalMetadata=l.internalMetadata}})}_spliceNotebookCells(c){c.reverse().forEach(l=>{const s=l[2].map(i=>new w(i.handle,i.source,i.language,i.cellKind,i.outputs,i.metadata));this.cells.splice(l[0],l[1],...s)})}}class N{constructor(c){this.textModel=c}getElements(){const c=new Int32Array(this.textModel.cells.length);for(let l=0;l<this.textModel.cells.length;l++)c[l]=this.textModel.cells[l].getComparisonValue();return c}getCellHash(c){const l=Array.isArray(c.source)?c.source.join(`
`):c.source;return(0,M.hash)([(0,M.hash)(l),c.metadata])}}e.CellSequence=N;class L{constructor(){this._models=Object.create(null)}dispose(){}acceptNewModel(c,l){this._models[c]=new y(F.URI.parse(c),l.cells.map(t=>new w(t.handle,t.source,t.language,t.cellKind,t.outputs,t.metadata)),l.metadata)}acceptModelChanged(c,l){this._models[c]?.acceptModelChanged(l)}acceptRemovedModel(c){!this._models[c]||delete this._models[c]}computeDiff(c,l){const t=this._getModel(c),s=this._getModel(l);return{cellsDiff:new B.LcsDiff(new N(t),new N(s)).ComputeDiff(!1)}}_getModel(c){return this._models[c]}}e.NotebookEditorSimpleWorker=L;function T(_){return new L}e.create=T})}).call(this);

//# sourceMappingURL=notebookSimpleWorker.js.map
